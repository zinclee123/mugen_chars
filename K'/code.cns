;Based on Vans Neo WLS system
;=================================================;
;Coding File           ;
;http://trinitymugen.net                          ;
;NO to code theft                                 ;
;=================================================;
;Vars Used
;Var   1 = Used
;Var   2 = Jump Shit
;Var   3 = x2
;Var   4 = Command Buffer
;Var   5 = For Win State Decider.
;Var   6 = Superpause check
;Var   7 = Used
;Var   8 = Enemy identifier
;Var   9 = Display to Clipboard Message
;Var  10 = EX Mode Detection
;Var  11 = Guard Crush
;Var  12 = Cornerpush accel counter.
;Var  13 = Dizzy Code Shit
;Var  14 = x2
;Var  15 = Used
;Var  16 = Slowmotion Time
;Var  17 = Conerpush type; 1 = Hard, 2 = Light
;Var  18 = Button Used
;Var  19 = Throw Limitation
;Var  20 = Afterimage Switch
;Var  21 = Flash Switch
;Var  22 = Blood Switch
;Var  23 = Command Var
;Var  24 = Used
;Var  25 = Used
;Var  26 = Run feature
;var 27 = heat drive unblockable activator
;Var  28 = Recent Custom States
;Var  29 = Gametime Variable
;Var  30 = Primary AI Variable
;var 31 = used
;var 32 = used
;var 33 = used
;Var 34 = Chain Drive Sunglasses Hit
;var 35 = DM/SDM powerbar detection
;Var  40 = heat drive edge detection
;Var  41 = DRINK SYSTEM
;var 42 = vs kula detector
;var 43 = eins trigger/crow bite/minute spike followup
;var 44 = eins trigger juggle
;var 45 = second shell juggle
;var 46 = damage dampening system
;var 50 = max cancel hit detect
;var 51 = max mode
;var 52 = max mode palfx
;Var  53 = max mode yes or no
;Var  54 = Super Cancel
;Var  55 = KOF Juggle System
;Var  56 = Counter Hit System
;Var  57 = x2
;Var  58 = Juggle SPECIAL
;Var  59 = Simplifier Variable
;Floats
;FVar  0 = K.O. Voice
;FVar  1 = Cheap K.O.
;FVar  2 = K.O. Voice
;FVar  3 = Intro position
;FVar  5 = Skillbar level
;FVar  6 = Cornerpush
;FVar  7 =
;FVar  8 = Throw Escape Check
;FVar 35 = K.O. Voice
;FVar 36 = K.O. Voice
;---------------------------------------------------------------------------
; Win state decider Taken from KFM Plus some minor tweaks.
; Thanks to Neon_Tiger for pointing me out the VarRandom method.
[Statedef 180]
type = S
ctrl = 0

[State 180, 1]
type = ChangeState
triggerall = var(22) = 1
trigger1 = time = 0
value = 171

[State 180, 1]
type = ChangeState
triggerall = var(22) = 0
trigger1 = command = "hold_x"
value = 172
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_y"
value = 173

[State 180, 1]
type = ChangeState
trigger1 = !time
triggerall = var(22) = 0
value = 172+(random%2)

;---------------------------------------------------------------------------
; Win Action Number 1
[Statedef 171]
type = S
ctrl = 0
anim = 171
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 11
value = 171,0
volume = 200

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,100]
flag = roundnotover
;---------------------------------------------------------------------------
; Win Action Number 2
[Statedef 172]
type = S
ctrl = 0
velset = 0,0

[State 172, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 172

[State 191,3]
type = PlaySnd
trigger1 = animelem = 3
value = 172,0
volume = 200

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,80]
flag = roundnotover

;---------------------------------------------------------------------------
; Win Action Number 3
[Statedef 173]
type = S
ctrl = 0
velset = 0,0

[State 172, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 173

[State 191,3]
type = PlaySnd
trigger1 = animelem = 1
value = 173,0
volume = 200

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,70]
flag = roundnotover


;-------------------------------------------------------------------
;Taken from KFM plus minor tweaks
;Intro
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 180, 1]
type = ChangeState
trigger1 = enemy, name = "Kyo_WLS" || enemy, name = "2003Kyo_WLS" || enemy, name = "CKyo_WLS"
trigger2 = enemy, name = "Kyo" || enemy, name = "Kyo Kusanagi" || enemy, name = "cvskyo"
value = 182

[State 0, ChangeState]
type = ChangeState
trigger1 = enemy,name = "Maxima"
value = 183

[State 0, ChangeState]
type = ChangeState
trigger1 = enemy,name = "Whip"
value = 184

[State 0, ChangeState]
type = ChangeState
trigger1 = enemy,name = "Kula Diamond" && Enemy, AuthorName = "KoopaKoot"
value = 185

[State 190, 1]
type = ChangeState
trigger1 = !time
value = 181
;-------------------------------------------------------------------
;Taken from KFM plus minor tweaks
;Intro
[Statedef 181]
type = S
movetype = I
physics = S
anim = 180
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = 180,0
volume = 200

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;-------------------------------------------------------------------
;Intro vs Kyo
[Statedef 182]
type = S
movetype = I
physics = S
anim = 181
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 10181, PlaySnd]
type = PlaySnd
trigger1 = animelem = 13
value = 4,10

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3)=2
anim = 182
ID = 182
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = 62
sprpriority = 4
removeongethit = 1

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro
;flag3 = nomusic

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;-------------------------------------------------------------------
;Intro vs Maxima
[Statedef 183]
type = S
movetype = I
physics = S
anim = 183
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 183,0
volume = 200

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro
;flag3 = nomusic

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;-------------------------------------------------------------------
;Intro vs Whip
[Statedef 184]
type = S
movetype = I
physics = S
anim = 184
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = 184,0
volume = 200

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro
;flag3 = nomusic

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;-------------------------------------------------------------------
;Intro vs Kula
[Statedef 185]
type = S
movetype = I
physics = S
anim = 185
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = 185,0
volume = 200

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0
;---------------------------------------------------------------------------
; Taunt, taken from KFM
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
anim = 195
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
triggerall = Roundstate = 2
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 2
value = 195,0
channel = 19
volume = 200

;---------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = N
sprpriority = 0
velset = 0,0

[State -3,STOP]
type = StopSnd
trigger1 = prevstateno = [191,194]
trigger1 = roundstate = 2
channel = 0

[State -3,STOP]
type = StopSnd
trigger1 = prevstateno = [191,194]
trigger1 = roundstate = 2
channel = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
trigger3 = Time = 0
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050 + 100*((Anim = 5120) || (Anim = 5150))

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 10, 1]
type = AssertSpecial
trigger1 = Time = 0
trigger1 = Anim = 10
flag = NoAutoTurn

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
trigger2 = var(59)
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type = S
physics = S
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0
[State 100, Karin]
type = VarSet
trigger1 = command = "x"
var(4) = 1
[State 100, Karin]
type = VarSet
trigger1 = command = "a"
var(4) = 2
[State 100, Karin]
type = VarSet
trigger1 = command = "y"
var(4) = 3
[State 100, Karin]
type = VarSet
trigger1 = command = "b"
var(4) = 4
[State 100, Karin]
type = VarSet
trigger1 = command = "z"
var(4) = 5
[State 100, Karin]
type = VarSet
trigger1 = command = "knock"
var(4) = 5

[State 40, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 40

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 1]
type = VarSet
triggerall = sysvar(1)
trigger1 = command = "hijump" && command != "chargedhijump"
trigger2 = PrevStateNo = 101 && sysvar(1) = 1
var(2) = 1
[State 40, 1]
type = VarSet
trigger1 = PrevStateNo = 101 && sysvar(1) = -1
var(2) = 0

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 5]
type = VarSet
trigger1 = command != "holdup"
var(3) = 2

[State 40, 6]
type = VelSet
triggerall = !var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

;Hi jump X vel
[State 40, 7]
type = VelSet
triggerall = var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

;Short jump Y vel
[State 40, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
y = ifelse (var(3), -7.693359375, const(velocity.jump.y))

[State 40, PlaySnd]
type = PlaySnd
trigger1 = !animtime
trigger2 = var(4) && time > 0
value = 2+(var(32)*10),3+var(2)

[State 810, 1]
type = AfterImage
triggerall = !var(31) && var(2)
trigger1 = !animtime
trigger2 = var(4) && time > 0
time = -1
length = 4
framegap = 1
timegap = 6
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 810, 1]
type = AfterImage
triggerall = var(31) && var(2)
trigger1 = !animtime
trigger2 = var(4) && time > 0
time = 10
length = 9
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

;--------------------------[APPROPIATE ATTACK STATE]----------------------------
;Jumping Light Punch
[State -1, Jumping Light Punch]
type = ChangeState
value = 600
trigger1 = var(4) = 1 && time > 0
;Jumping Light Kick
[State -1, Jumping Light Kick]
type = ChangeState
value = 700
trigger1 = var(4) = 2 && time > 0
;Jumping Hard Punch
[State -1, Jumping Hard Punch]
type = ChangeState
value = 610
trigger1 = var(4) = 3 && time > 0
;Jumping Hard Kick
[State -1, Jumping Light Kick]
type = ChangeState
value = 710
trigger1 = var(4) = 4 && time > 0
;Jumping CD Attack
[State -1, Jumping CD Attack]
type = ChangeState
value = 990
trigger1 = var(4) = 5 && time > 0
;-------------------------------------------------------------------------------

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0 && command = "holdup"
value = 50
ctrl = 1

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0 && Var(3) = 2
value = 41
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type = A
physics = N

[State 50, 1]
type = VarSet
trigger1 = Time = 1
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, VelAdd]
type = VelAdd
trigger1 = time >= 0
y = const(movement.yaccel)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;===========================  [Weird Jump Stuff] ===============================
;I have no idea, Chin's vel increases when he changes to a specific animelem
;Used a posadd to replicate this effect.
;4.25-2.125 Regular
;6.375-3.1875 Long

[State 50, Simplified]
type = Null
trigger1 = animelem = 5
x = vel x
;===============================================================================

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; Short Jump
[Statedef 41]
type = A
physics = N

[State 1101, pos]
type = Veladd
trigger1 = time > 0
y = const(movement.yaccel)

[State 810, 1]
type = AfterImage
triggerall = !var(31)
trigger1 = !time && var(2) && sysvar(1)
time = -1
length = 4
framegap = 1
timegap = 6
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = !time && var(2) && sysvar(1)
time = 10
length = 9
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 50, 1]
type = VarSet
trigger1 = Time = 1
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 51, ifelse((vel x)>0, 52, 53))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;===========================  [Weird Jump Stuff] ===============================
[State 50, Simplified]
type = Null
trigger1 = animelem = 4
x = vel x
;===============================================================================

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; DASH_FWD
[Statedef 100]
type    = S
physics = S
anim = 99
ctrl = 0
velset = 0
sprpriority = 1

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0
[State 100, Karin]
type = VarSet
trigger1 = command = "x"
var(4) = 1
[State 100, Karin]
type = VarSet
trigger1 = command = "a"
var(4) = 2
[State 100, Karin]
type = VarSet
trigger1 = command = "y"
var(4) = 3
[State 100, Karin]
type = VarSet
trigger1 = command = "b"
var(4) = 4
[State 100, Karin]
type = VarSet
trigger1 = command = "z"
var(4) = 5
[State 100, Karin]
type = VarSet
trigger1 = command = "knock"
var(4) = 5

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 101

[Statedef 101]
type    = S
physics = S
anim = 100
ctrl = 0
velset = 0
sprpriority = 1

[State -3, dash]
type = PlaySnd
trigger1 = time = 1
value = 2+(var(32)*10),8
volume = 200
loop = 1
channel = 27

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, VarSet]
type = VarSet
trigger1 = !time && prevstateno != 102
var(26) = 0
[State 100, VarSet]
type = VarSet
trigger1 = time > 10
var(26) = 1

;--------------------------[APPROPIATE ATTACK STATE]----------------------------
[State -1, Light Punch (Close)]
type = ChangeState
value = 205
triggerall = P2dist X < 39
trigger1 = time = 1 && var(4) = 1
[State -1, Light Punch (Far)]
type = ChangeState
value = 200
triggerall = P2dist X >= 39
trigger1 = time = 1 && var(4) = 1
[State -1, Light Kick]
type = ChangeState
value = 300
triggerall = P2dist X >= 39
trigger1 = time = 1 && var(4) = 2
[State -1, Light Kick (Close)]
type = ChangeState
value = 305
triggerall = P2dist X < 39
trigger1 = time = 1 && var(4) = 2
[State -1, Hard Punch]
type = ChangeState
value = 800
triggerall = P2dist X >= 80
trigger1 = time = 1 && var(4) = 3
[State -1, Hard Punch (Close)]
type = ChangeState
value = 810
triggerall = P2dist X < 80
trigger1 = time = 1 && var(4) = 3
[State -1, Hard Kick]
type = ChangeState
value = 310
triggerall = P2dist X >= 49
trigger1 = time = 1 && var(4) = 4
[State -1, Hard Kick (Close)]
type = ChangeState
value = 315
triggerall = P2dist X < 49
trigger1 = time = 1 && var(4) = 4
[State -1, CD Attack]
type = ChangeState
value = 980
trigger1 = time = 1 && var(4) = 5
;-------------------------------------------------------------------------------

[State 220,2]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 101, 6]
type = ChangeState
trigger1 = Time > 9
trigger1 = command != "holdfwd"
value = 102

[Statedef 102]
type    = S
physics = S
anim = 101
ctrl = 0
velset = 0
sprpriority = 1

[State 100, 4]
type = ChangeState
triggerall = var(26)
trigger1 = command = "holdfwd"
value = 101

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Used OrochiKOF's code as a reference.
;RUN BACK
[Statedef 105]
type    = S
physics = S
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 106]
type    = A
physics = N
ctrl = 0
anim = 106
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = time = 0
x = -9.4140625

[State 105, 1]
type = VelSet
trigger1 = !time
y = -1.75

[State 0, VelMul]
type = VelMul
trigger1 = time > 0
x = 0.94140625

[State 105, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.29296875

[State 105, 3]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 107

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 107]
type    = S
physics = S
ctrl = 0
anim = 107

[State -3, land]
type = PlaySnd
trigger1 = !time
value =  2+(var(32)*10),2

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 107, CtrlSet]
type = CtrlSet
trigger1 = time = 2
value = 1

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 5050, 4]
type = VarSet
trigger1 = Vel Y > 0
trigger1 = (Vel Y + Pos Y) >= -32
trigger1 = command = "recovery2"||Random < var(59)*200
var(4) = 1

[State 5050, 6]
type = ChangeState
triggerall = CanRecover
trigger1 = Time > 0
trigger1 = Vel Y + Pos Y >= 0
trigger1 = var(4)
trigger1 = Life > 0
value = 5201

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 5050, 4]
type = VarSet
trigger1 = Vel Y > 0
trigger1 = (Vel Y + Pos Y) >= -32
trigger1 = command = "recovery2"||Random < var(59)*200
var(4) = 1

[State 5050, 6]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y + Pos Y >= 0
trigger1 = var(4)
trigger1 = Life > 0
value = 5201

[State 5071, 3] ;Hit ground
trigger1 = Vel Y + Pos Y >= 0
type = ChangeState
value = 5100

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, Explod]
type = Explod
trigger1 = !time && (sysvar(1) >= 14)
anim = 12001+(var(31)*10000)
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = 2

[State 5100, Explod]
type = Explod
trigger1 = !time && (sysvar(1) >= 14)
anim = 12002+(var(31)*10000)
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1

[State 5100, Explod]
type = Explod
trigger1 = !time && (sysvar(1) < 14)
anim = 12000
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = S2+(var(32)*10),9

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = Null;PosSet
trigger1 = Time = 0
y = 20

[State 5101, 4]
type = VelSet
trigger1 = Time = 0
y = -3

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = time > 0
y = gethitvar(yaccel)

[State 5101, 6] ;Hit ground
trigger1 = Pos Y + Vel Y >= 0
type = ChangeState
value = 5110


;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N
[State 5110, 0]
type = ChangeState
trigger1 = 1
value = 5111
;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5111]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = S2+(var(32)*10),5
channel = 1

[State 5100, Explod]
type = Explod
trigger1 = !time && (sysvar(1) < 14)
anim = 12000
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If just died
type = ChangeState
trigger1 = time = const(data.liedown.time) + 4*(anim=5111||anim=5112)
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = PrevStateno != 5950
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = N
anim = 5200

[State 1300, PlaySnd]
type = PlaySND
trigger1 = animelem = 1
value = 5200,0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = !time
x =-11.5
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 1
x = -7.921875

[State 5201, VelMul]
type = VelMul
trigger1 = 1
x = 0.8125

[State 750, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 705, 1]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;-----------------
[Statedef 5205]
type= A
physics= N
movetype= H

[State 5205, End]; Sends character back to his own recovery states
type= selfstate
trigger1= 1
value= ifelse(pos y<-20, 5210, 5200)

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 840]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = SelfState
trigger1 = !Alive
value = 5050
[State 5040, SelfRecover]
type = SelfState
trigger1 = !time
value = 5040

;----------------------------------------------------------------------------------
; Cheap KO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 1]
type = HitVelSet
trigger1 = Time = 0
x = 2

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifElse(FVar(1)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElem = 7
value = 5150

;----------------------------------------
;Light Punch
[Statedef 200];Ok
type = S
movetype = A
physics = S
anim = 200
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(41*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -75
hitsound = s5,1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 200,1]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;----------------------------------------
;Light Punch (Close)
[Statedef 205];Ok
type = S
movetype = A
physics = S
anim = 205
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, Hit Def]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(33*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -80
hitsound = s5,1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 205,2]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;----------------------------------------
;Hard Punch
[Statedef 210];Ok
type = S
movetype = A
physics = S
anim = 210
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
attr = S, NA
damage = floor(116*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -90
hitsound = s5,3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 210,2]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;----------------------------------------
;Hard Punch (Close)
[Statedef 215];Ok
type = S
movetype = A
physics = N
anim = 215
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(66*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -60
hitsound = s5,3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = 0
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 210
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElem = 5
attr = S, NA
damage = floor(25*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -100
hitsound = s5,3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 210
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Light Kick
[Statedef 300];Ok
type = S
movetype = A
physics = N
anim = 300
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = S, NA
damage = floor(41*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -40
hitsound = s5,5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 300,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Light Kick (Close)
[Statedef 305];Ok
type = S
movetype = A
physics = N
anim = 305
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = S, NA
damage = floor(33*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = Low
guardflag = L
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -20, -30
hitsound = s5,5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
guard.pausetime = 12,10
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 300,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Hard Kick
[Statedef 310];Ok
type = S
movetype = A
physics = S
anim = 310
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
attr = S, NA
damage = floor(108*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -90
hitsound = s5,7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 310
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 320,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Hard Kick (Close)
[Statedef 315];Ok
type = S
movetype = A
physics = N
anim = 315
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 4
attr = S, NA
damage = floor(100*ifelse(var(56),1.25,1)) ;1.24 Mul for Counter Hit
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -20
hitsound = s5,7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 8,16
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 20
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -10
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 320,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Crouching Light Punch
[Statedef 400];Ok
type = C
movetype = A
physics = N
anim = 400
juggle = 8
ctrl = 0
velset = 0,0
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, Hit Def]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = C, NA
damage = floor(25*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = back
guardflag = M
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -50
hitsound = s5,1
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = low
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 400,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------
;Crouching Hard Punch
[Statedef 405];Ok
type = C
movetype = A
physics = N
juggle = 8
anim = 405
ctrl = 0
velset = 0,0
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = C, NA
damage = floor(108*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s5,3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 405,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-------------------------------------
;Crouching Light Kick
[Statedef 500];Ok
type = c
movetype = A
physics = N
juggle = 8
anim = 500
ctrl = 0
velset = 0,0
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, Hit Def]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = C, NA
damage = floor(25*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = back
guardflag = L
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -10
hitsound = s5,5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = low
priority = 7, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
guard.pausetime = 12,10
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 500,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------
;Crouching Hard Kick 
[Statedef 505];Ok
type = c
movetype = A
physics = C
juggle = 8
anim = 505
ctrl = 0
velset = 0,0
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 4
attr = C, NA
damage = floor(116*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = L
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -20
hitsound = s5,7
guardsound = s3+(var(32)*2), 13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = Trip
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 27
ground.hittime = 27
guard.hittime = 18
guard.slidetime = 18
guard.ctrltime = 29
ground.velocity = -1.75,-10.25341796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5,-8.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
fall.recover = 1
fall.recovertime = 120
id = 506
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.807692307692307692307692307692308

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 510,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------
;Jumping Light Punch
[Statedef 600];Ok
type = A
movetype = A
physics = N
anim = 600
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = A, NA
damage = floor(50*ifelse(var(56),1.25,1))
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -40
hitsound = s5,1
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 10,10
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 17
ground.type = low
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;----------------------------------------
;Jumping Hard Punch
[Statedef 610];Ok
type = A
movetype = A
physics = N
anim = 610;610+(ifelse((Vel X != 0),5,ifelse((Var(3) = 2),5,0)))
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 610 && AnimElem = 5
trigger2 = anim = 615 && AnimElem = 4
movetype = I

[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 610 && AnimElem = 3
attr = A, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = medium
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -50
hitsound = s5,3;s3, 3;s2, 3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 12,12
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 22
ground.velocity = -5.796875
guard.velocity = -11.1796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 615 && AnimElem = 3
attr = A, NA
damage = floor(98*ifelse(var(56),1.25,1))
animtype = m
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s5,3;s3, 3;s2, 3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 12,13
guard.pausetime = 12,12
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 22
ground.velocity = -5.796875
guard.velocity = -11.1796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
;----------------------------------------
;Jumping Light Kick
[Statedef 700];Ok
type = A
movetype = A
physics = N
anim = 700+(ifelse((Vel X != 0),5,ifelse((Var(3) = 2),5,0)))
ctrl = 0
juggle = 8

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 700 && AnimElem = 11
trigger2 = anim = 705 && AnimElem = 16
movetype = I

[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 700 && AnimElem = 3
attr = A, NA
damage = floor(58*ifelse(var(56),1.25,1))
animtype = m
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -40
hitsound = s5,5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = Low
pausetime = 12,13
guard.pausetime = 12,12
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 705 && AnimElem = 4
attr = A, NA
damage = floor(41*ifelse(var(56),1.25,1))
animtype = m
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -40
hitsound = s5,5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = Low
pausetime = 12,13
guard.pausetime = 12,12
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
;----------------------------------------
;Jumping Hard Kick
[Statedef 710]
type = A
movetype = A
physics = N
anim = 710
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0
[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
movetype = I

[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 4
attr = A, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = m
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -70
hitsound = s5,7
guardsound = s3+(var(32)*2), 13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 12,13
guard.pausetime = 12,12
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 22
ground.velocity = -5.796875
guard.velocity = -11.1796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
;--------------------------------------------
;Thanks to Warusaki's original roll code, which these rolls were adapted from.
;Roll 1
[Statedef 750]
type = S
movetype= I
physics = N
juggle = 10
velset = 0,0
ctrl = 0
anim = ifelse((prevstateno=[150,151]),751,750)

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5+((prevstateno = 101)*2)

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 320, Voice]
type = PlaySnd
trigger1 = animelem = 1
value = 750,0

[State 750, Push]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0 && AnimElemTime(8) < 0
value = 0

[State 750, Width]
type = Width
trigger1 = Vel X != 0
edge = 10,0

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 750, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000
persistent = 0

[State 750, 1]
type = HitBy
trigger1 = AnimElemTime(8) < 0
value = SCA,NT,ST,HT

[State 750, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Roll 2
[Statedef 760]
type = S
movetype= I
physics = N
juggle = 10
velset = 0,0
ctrl = 0
anim = ifelse((prevstateno=[150,151]),761,760)

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 4
x = -5

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 0

[State 750, Width]
type = Width
trigger1 = Vel X != 0
edge = 10,0

[State 320, Voice]
type = PlaySnd
trigger1 = animelem = 1
value = 750,0

[State 750, Push]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0 &&  AnimElemTime(9) < 0
value = 0

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 750, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000
persistent = 0

[State 750, 1]
type = HitBy
trigger1 = AnimElemTime(9) < 0
value = SCA,NT,ST,HT

[State 750, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 780]
type = S
physics = S
movetype= I
ctrl = 0
anim = 790
velset = 0,0

[State -2, Helper]
type = Helper
trigger1 = !time
helpertype = normal
ID = 70002
stateno = 70007
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
anim = 14130
id = 14130
pos = -7,-75
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
sprpriority = -2
ownpal = 1
bindtime = -1

[State 3000, EnvShake]
type = EnvShake
trigger1 = animelemtime(3) = 0
time = 14
freq = 180
ampl = -6
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;MAX - ON !!
[Statedef 790]
type = S
physics = S
movetype= I
ctrl = 0
anim = 790
velset = 0,0

[State 6001, pause]
type = SuperPause
triggerall = prevstateno = [200,980]
trigger1 = !time
time = 21
movetime = 21
anim = -1
poweradd = -1000

[State -2, Helper]
type = Helper
trigger1 = !time
helpertype = normal
name = "MAX"
ID = 70001
stateno = 70005
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
anim = 14130
id = 14130
pos = -7,-75
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
sprpriority = -2
ownpal = 1
bindtime = -1

[State 3000, EnvShake]
type = EnvShake
trigger1 = animelemtime(3) = 0
time = 14
freq = 180
ampl = -6
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = ifelse(command = "holdfwd"||var(59),100,0)
ctrl = 1

;----------------------------------------
;One Inch
[Statedef 800];Ok
type = S
movetype = A
physics = N
anim = 800
ctrl = 0
juggle = 8
velset = 0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 5
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 5
value = 800,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 5100, EnvShake]
type = EnvShake
trigger1 = animelem = 5
time = 10
freq = 180
ampl = -4

[State 210, 1]
type = HitDef
triggerall = p2stateno != [10900,10904]
triggerall = !var(56)
triggerall = !var(55)
trigger1 = AnimElem = 6
attr = S, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -60
hitsound = s5,9;3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -4.5,-6.5;-11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
fall = 1
getpower = 109,109
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
p2stateno = 10800
id = 800

[State 210, 1]
type = HitDef
triggerall = p2stateno != [10900,10904]
triggerall = var(56)
triggerall = !var(55)
trigger1 = AnimElem = 6
attr = S, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -60
hitsound = s5,9;3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -4.5,-6.5;-11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
fall = 1
getpower = 109,109
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
p2stateno = 10900
id = 800

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(800) && p2statetype = A && movehit
v = 45
value = 60

[State -2, Juggle Killer]
type = Null
triggerall = !var(57)
triggerall = !var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Hit By One Inch Punch (For Pausetime)
[Statedef 10800]
type    = S
movetype= H
physics = N
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000),5010+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + GetHitVar(animtype)))
value = 5047+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 10801

;Hit By One Inch Punch (Air Fall)
[Statedef 10801]
type    = A
movetype= H
physics = N
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3340, Vel]
type = VelSet
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),7,-7)
y = -4

[State 3340, Gravity]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 3340, Anim 5050]
type = ChangeAnim
trigger1 = !time
persistent = 0
value = 5050+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 10802 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [105051,105059]) || (anim = [105061,105069]), 0, 25)
value = 10802 ;HIT_BOUNCE

;Hit By One Inch Punch (Slide)
[Statedef 10802]
type    = S
movetype= H
physics = N
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 10802

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State InitVel]
type = VelSet
trigger1 = !time
X = ifelse((facing=enemynear,facing),3.56535983085632,-3.56535983085632)

[State Accel]
type = VelAdd
trigger1 = Vel X != 0
X = ifelse((facing=enemynear,facing),-0.176470592617989,0.176470592617989)

[State 802, VelSet]
type = VelSet
trigger1 = Time = 20
x = 0

[State 802, SelfState]
type = ChangeState
trigger1 = Vel X = 0
value = 10803

;Hit By One Inch Punch (Liedown)
[Statedef 10803]
type    = S
movetype= H
physics = N

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 10803

[State 803, SelfState]
type = SelfState
trigger1 = animtime = 0
value = Ifelse(alive,5120,5150)

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 10900]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = selfanimexist(5900)
trigger1 = !time
value = 5900

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = !selfanimexist(5900)
trigger1 = !time
value = 10900

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 10901

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 10901]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = VelSet
trigger1 = time = 0
x = -15.75

[State 1026, Gravity]
type = VelSet
trigger1 = time = 0
y = -4.5

[State 0, VelMul]
type = VelMul
trigger1 = time > 0
x = 0.984375

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.5

[State 1026, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1026, Hit wall]
type = ChangeState
triggerall = time > 2;Pos y < -15
trigger1 = BackEdgeBodyDist <= 32
trigger2 = FrontEdgeBodyDist <= 32
value = 10902

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 10902]
type    = A
movetype= H
physics = N

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
;trigger1 = (gametime%2)
trigger1 = 1
value = 1
movecamera = 0,0

[State 1027, Anim]
type = ChangeAnim
trigger1 = selfanimexist(5901)
trigger1 = !time
value = 5901

[State 1027, Anim]
type = ChangeAnim2
trigger1 = !selfanimexist(5901)
trigger1 = !time
value = 5901

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 10903

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 10903]
type    = A
movetype= H
physics = N
velset = 0,0
p2facing = 1

[State 0, Turn]
type = Turn
trigger1 = !time

[State 1026, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 5000, 3]
type = ChangeAnim2
trigger1 = Time = 0
value = 5902

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A

[State 5000, 7]
type = ChangeState
trigger1 = Pos Y > -20
trigger1 = time = 9
value = 10904

[State 5050, 6]
type = ChangeState
triggerall = time > 9
triggerall = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
trigger2 = Pos Y >= ifelse((anim = [105051,105059]) || (anim = [105061,105069]), 0, 25)
value = 10904 ;HIT_BOUNCE

[State 1008, VelSet]
type = VelSet
trigger1 = time = 0
x = -2
y = -14.908935546875

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 1

[State 1008, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.7

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 10904]
type    = L
movetype= H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5100) + (anim % 10)
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5100) + (anim % 10)
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelSet
trigger1 = Time = 0
x = 0

[State 5100, 7]
type = SelfState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;----------------------------------------
;One Inch C.I
[Statedef 801];Ok
type = S
movetype = A
physics = N
anim = 801
ctrl = 0
juggle = 8
velset = 0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 5
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 5
value = 800,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 5100, EnvShake]
type = EnvShake
trigger1 = animelem = 5
time = 10
freq = 180
ampl = -4

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElem = 6
attr = S, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,16
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -5
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
fall = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Knee Assault
[Statedef 810];Ok
type = S
movetype = A
physics = N
ctrl = 0
juggle = 8
velset = 0
anim = 810

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 810,0
channel = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelemtime(6) = 0
statetype = A

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 16

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 11

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(6) = 0
x = 3.8125
y = -3

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(6) > 0
y = 0.375

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(6) > 0
x = 0.953125

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(8) = 3
x = 0

[State 210, 1]
type = HitDef
triggerall = prevstateno != [200,599]
triggerall = !var(55)
trigger1 = animelem = 7
attr = S, NA
damage = floor(107*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = H
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -70
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State 210, 1]
type = HitDef
triggerall = prevstateno = [200,599]
triggerall = !var(55)
trigger1 = animelem = 5
attr = S, NA
damage = floor(98*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -70
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1

[State 220,2]
type = ChangeState
trigger1 = Vel Y + Pos Y >=0 && statetype = A
value = 811
ctrl = 0

[Statedef 811]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 811

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Spot Pile
[Statedef 900]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 900

[State 900, Grab Attempt] ; Taken from OrochiKOF97's Tutorial
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sprpriority = 1
p2facing = 1
sparkno = -1
guard.sparkno = -1
p1stateno = 910
p2stateno = 920
fall.xvelocity = -2.5
fall.yvelocity = -4
yaccel = .5

[State 900, 2]
type = ChangeState
trigger1 = !MoveContact && Time
value = 210
ctrl = 0

;----------------------------------------------------------------------
[Statedef 910]
type = S
movetype= A
physics = N
anim = 901

[State 910, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 910, 1]
type = VarSet
triggerall = Time < 7 && !fVar(8)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(8) = 1

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 910, ChangeState]
type = ChangeState
trigger1 = Time < 7 && FVar(8)
value = 950

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 10
id = -1
pos = 25,0

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 3
value = -3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 12,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 200,0
volume = 200
channel = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 20000
ID = 20000
pos = 33,-91
postype = p1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Width]
type = Width
trigger1 = 1
edge = 20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = 5,3

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 7
value = -156

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 27002
ID = 27002
pos = -5,-43
postype = p2
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 3303, Explod]
type = Explod
triggerall = !NumExplod(10000)
trigger1 = animelem = 7 && P2MoveType = H
anim = 12000
pos = 0,0
id = 12000
postype = p2  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1
persistent = 0

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 910, State End]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

[Statedef 920]
type = A
movetype = H
physics = N
poweradd = 0
velset = 0
ctrl = 0
facep2 = 1
sprpriority = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 902

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 921

[Statedef 921]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 0, ChangeAnim] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 0, Changestate]
type = ChangeState
trigger1 = HitShakeOver
value = 922

[Statedef 922]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, 4]
type = PosAdd
trigger1 = Time = 0
x = -10

[State 0, Envshake]
type = envshake
Trigger1 = time = 0
time = 9
ampl = -3
freq = 110

[State 0, posadd]
type = posadd
trigger1 = Time = 0
x = 0

[State 0,Nothitby]
type = nothitby
trigger1 = Time = 1
value = SCA
time = 1

[State 0, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 0, Var]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 0, 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = SelfAnimExist(5102)
value = 5102

[State 0, 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = SelfAnimExist(5101)
trigger1 = !SelfAnimExist(5102)
value = 5101

[State 0, 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5101)
trigger1 = !SelfAnimExist(5102)
value = 5100

[State 0, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, 6] ;Reduce speed
type = Null
trigger1 = Time = 0
x = 0.75

[State 0, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 61
pos = 0, 0
under = sysvar(1) <= 10

[State 0, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 0, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 0, 12]
type = Changestate
trigger1 = Time = 7
value = 923

[Statedef 923]
type    = L
movetype= H
physics = N

[State 0, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 0, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 0, 3]
type = Null
trigger1 = Time = 0

[State 0, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 0, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 0, 6] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
value = 924

[Statedef 924]
type    = L
movetype= H
physics = N

[State 0, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 0, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 0, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 0, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 0, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 0, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 0, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 0, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 0, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 0, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 0, GETUP] ;If just died
type = SelfState
triggerall = alive
trigger1 = time = 20
value = 5120
ctrl = 0

[State 0, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 0, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85


;---------------------------------------------------------------------
; ibyH"j
;------------------------ 
[Statedef 950]
type = S
movetype = A
physics = N
anim = 5945
ctrl = 0
velset = -16, 0

[State 950, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 3,3
persistent = 0

[State 810,TargetBind]
type = TargetState
trigger1 = Time = 0
value = 955

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .75

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;------------------------ 
[Statedef 955]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0, 0
facing = enemy,facing
facep2 = 1

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5940)
trigger1 = authorname = "Hh" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "NyanKiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSSCAT" || AuthorName = "CrossCat"
trigger8 = AuthorName = "Jesuszilla" || AuthorName = "Vans"
trigger9 = AuthorName = "N64Mario" && Name = "Zero" && FVar(17) = 1
value = 5940

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5910) && !SelfAnimExist(5940)
trigger1 = authorname = "Hh" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "NyanKiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSSCAT" || AuthorName = "CrossCat"
trigger8 = AuthorName = "Jesuszilla" || AuthorName = "Vans"
trigger9 = AuthorName = "N64Mario" && Name = "Zero" && FVar(17) = 1
value = 5910

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && anim != 5940 && anim != 5910
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1
;--------------------------------------------
;Knee Strike
[Statedef 956]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 900

[State 900, Grab Attempt] ; Taken from OrochiKOF97's Tutorial
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sprpriority = 1
sparkno = -1
guard.sparkno = -1
p1stateno = 960
p2stateno = 962
;fall.xvelocity = -2.5
;fall.yvelocity = -4
yaccel = .5

[State 900, 2]
type = ChangeState
trigger1 = !MoveContact && Time
value = 310
ctrl = 0

;----------------------------------------------------------------------
;Knee Strike
[Statedef 960]
type = S
physics = S
anim = 961
poweradd = 0
velset = 0
ctrl = 0
sprpriority = 2

[State 910, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 910, 1]
type = VarSet
triggerall = Time < 7 && !fVar(8)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(8) = 1

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 910, ChangeState]
type = ChangeState
trigger1 = Time < 7 && FVar(8)
value = 950

[State 0, Width]
type = Width
trigger1 = 1
edge = 20,40

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 210,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 12,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 5,3

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 20000
ID = 20000
pos = 21,-106
postype = p1
removetime = 15
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = animelem = 4

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
pos = 10,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 10
id = -1
pos = 3,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = -3,0

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 4
value = -147

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 27002
ID = 27002
pos = 7,-59
postype = p2
removetime = 16
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animelem = 9
x = -8

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 962]
type = A
movetype = H
physics = N
poweradd = 0
velset = 0
ctrl = 0
facep2 = 1
sprpriority = 0

[State 0, ScreenBound]
Type = ScreenBound
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 962

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 963

[Statedef 963]
type = A
movetype = H
physics = N
velset = 4,-5

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .5

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 963

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;--------------------------------------------
;Knockdown 1
[Statedef 980]
type = S
movetype = A
physics = N
anim = 980
velset = 0,0
ctrl = 0
juggle = 7
facep2 = 1

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 980,0
channel = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),8-(var(32)*2)

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = animelem = 5
attr = S, NA
damage = 156
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
fall.recover = 1
fall.recovertime = 120
id = 980
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Knockdown Counter Version
[Statedef 981]
type = S
movetype = A
physics = S
anim = 981
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1
poweradd = -1000

[State 13000, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, PalFX]
type = PalFX
trigger1 = time < 7
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 980,0
channel = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),6

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 981, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(6) < 0
value = SCA
time = 1

[State 210, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = AnimElem = 5
attr = S, NA
damage = 156
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -80
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32)*2);s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 980
fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
p2stateno = 10900

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------
;Knockdown 2
[Statedef 990]
type = A
movetype = A
physics = A
anim = 990
ctrl = 0
juggle = 8

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 980,0
channel = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),8-(var(32)*2)

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 600, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = animelem = 5
attr = A, NA
damage = 127
animtype = Light
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
guard.pausetime = 10,10
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.velocity = -4.5,-6.5
air.juggle = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 980
fall.recover = 0
yaccel = .5

[State 40, 6]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;----------------------------------------
;Eins Trigger (Weak)
[Statedef 1000];Ok!
type    = S
movetype= A
physics = N
poweradd = 31
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 1000

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3)=2
id = 3008
anim = 3008
pos = 0,0
sprpriority = -2
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1000,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1000,1
volume = 200

[State 1000: Helper]
type = Helper
trigger1 = animelemtime(3) = 1
helpertype = Normal
name = "Eins Trigger Flame"
id = 1001
pos = 0, 0
postype = p1
facing = 1
stateno = 1001
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
persistent = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 43
value = 0

;Second Shoot
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "a"
;A.I
trigger2 =  P2bodydist X > 90 && var(59)=1
var(43) = 1

;Second Shell
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "b"
;A.I
trigger2 =  P2bodydist X <= 90 && var(59)=1
var(43) = 2

;Blackout Weak
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdback" && command = "a"
var(43) = 3

;Blackout Hard
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdback" && command = "b"
var(43) = 4

;Minute Spike W.
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "x"
var(43) = 5

;Minute Spike H.
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "y"
var(43) = 6

[State 0, ChangeState]
type = ChangeState
triggerall = Animelem = 7,>0 && Animelem = 8,<=3
trigger1 = var(43) = 1
trigger2 = var(59) && p2bodydist X > 60
value = 1005
ctrl = 0

[State 0, ChangeState]
type = ChangeState
triggerall = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 2
trigger2 = var(59) && p2bodydist X <= 60
value = 1010
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 3
value = 1020
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 4
value = 1025
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 5
value = 1030
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 6
value = 1035
ctrl = 0

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Eins Trigger Proj
[Statedef 1001]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1001
sprpriority = 4
juggle = 10

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1005, nothitby]
type = nothitby
trigger1 = 1
value = SCA
time = -1
ignorehitpause=1

[State 210, 1]
type = HitDef
triggerall = !root, var(55) && root,var(44)=0 && root,var(45)=0
trigger1 = animelem = 1
attr = S, SP
damage = floor(41*ifelse(root,var(56),1.25,1)),10
animtype = Hard
air.animtype = Up
guardflag = M
hitflag = MAF
priority = 3, Hit
sparkno = -1 ;s17002+(root,var(31)*10000)
sparkxy = -20, -40
hitsound = -1;s4,1
guardsound = -1;s3+(root,var(32)*2), 13
guard.sparkno = -1;s17502+(root,var(31)*10000)
ground.type = Low
pausetime = 0,4
guard.pausetime = 0,3
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -4.5,-6.5 ;-11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 16,16
id = 1000
nochainid = 1000, 1005
air.fall = 1
fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 35
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = .5

[State 3005, ContactSound]
type = PlaySnd
trigger1 = MoveContact && NumTarget
value = ifelse(MoveHit,4,5), ifelse(MoveHit,1,13)
persistent = 0

[State 3005, ContactSpark]
type = Explod
trigger1 = MoveContact && NumTarget
anim = ifelse(MoveHit,27002,27502)
ID = 27000
pos = 0,-50
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
shadow = 0,0,0
ownpal = 1
persistent = 0

[State 0, Projectile]
type = Projectile
trigger1 = !time
attr = S, SP
projanim = 1002
projpriority = 9999
projhitanim = -1
projremovetime = 15
offset = 0,0

[State 1411, VarSet]
type = ParentVarSet
trigger1 = numtarget(1000) && movehit
var(16) = 12
persistent = 0
ignorehitpause=1

[State 1050, VarSet]
type = VarSet
trigger1 = 1
var(1) = movehit
ignorehitpause = 1

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && root,var(24)
helpertype = normal
name = "K.O."
ID = 50001
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 1005, End]
type=destroyself
trigger1 = animtime = 0
trigger2 = (root, stateno = 1005) && root, animelem = 4
trigger3 = (root, stateno = 1010) && root, animelem = 3

;Second Shoot
[Statedef 1005]
type    = A
movetype = A
physics = N
poweradd = 31
ctrl = 0
velset = 0,0
sprpriority = 2
juggle  = 8
anim = 1005

[State 1000: Helper]
type = Helper
trigger1 = animelemtime(4) = 1
helpertype = Normal
name = "Second Shoot Proj"
id = 1007
pos = 89,-69
postype = p1
facing = 1
stateno = 1007
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1005,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1005,1
volume = 200

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 8

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1006
ctrl = 0

[Statedef 1006]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1006

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Second Shoot Proj
[Statedef 1007]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1007
sprpriority = 4
juggle = 10

[State 0, VelSet]
type = VelSet
trigger1 = parent,prevstateno = 1000
trigger1 = time = 1
x = 4

[State 0, VelSet]
type = VelSet
trigger1 = parent,prevstateno = 1015
trigger1 = time = 1
x = 7

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1005, HitOverride]
type=hitoverride
trigger1= 1
attr=SCA,AA,AP,AT
time=-1
stateno=stateno+1
ignorehitpause=1

[State 1005, HB]
type=hitby
trigger1= 1
value=SCA,NP,SP,HP
time=-1

[State 210, 1]
type = HitDef
triggerall = !root, var(55) && root,var(44)=0
trigger1 = animelem = 1
attr = S, SP
damage = floor(66*ifelse(root,var(56),1.25,1)),10
animtype = Hard
air.animtype = Up
guardflag = M
hitflag = MAF
priority = 3, Hit
sparkno = -1;s17002+(root,var(31)*10000)
sparkxy = -20, 0
hitsound = -1;s4,1
guardsound = -1;s3+(root,var(32)*2), 13
guard.sparkno = -1;s17502+(root,var(31)*10000)
ground.type = Low
pausetime = 0,8
guard.pausetime = 0,7
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 16,16
id = 1005
nochainid = 1005
air.fall = 1
fall = 0
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 35
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = .5

[State 3005, ContactSound]
type = PlaySnd
trigger1 = MoveContact && NumTarget
value = ifelse(MoveHit,4,5), ifelse(MoveHit,1,13)
persistent = 0

[State 3005, ContactSpark]
type = Explod
trigger1 = MoveContact && NumTarget
anim = ifelse(MoveHit,27002,27502)
ID = 27000
pos = 0,-50
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
shadow = 0,0,0
ownpal = 1
persistent = 0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = numtarget(1005) && p2statetype = A && movehit
v = 44
value = 60

[State 1411, VarSet]
type = ParentVarSet
trigger1 = numtarget(1005) && movehit
var(16) = 12
persistent = 0
ignorehitpause=1

[State 1050, VarSet]
type = VarSet
trigger1 = !time
var(0) = 2
ignorehitpause = 1

[State 1050, VarSet]
type = VarSet
trigger1 = 1
var(1) = movehit
ignorehitpause = 1

[State 1005, End]
type=changestate
trigger1= movecontact
value=stateno+1
ignorehitpause=1

[State 1005, End]
type=destroyself
trigger1= pos x!=[-200,200]

[Statedef 1008]
type=S
physics=N
movetype=A
ctrl=0
anim=1
sprpriority=4
velset =0,0

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && root,var(24)
helpertype = normal
name = "K.O."
ID = 50001
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 1050, VarSet]
type = VarSet
triggerall = numtarget(1005) && var(1)
trigger1 = target(1005), ishelper = 0
var(0) = 1

[State 1005, End]
type=destroyself
trigger1= time = 1

;Second Shell
[Statedef 1010]
type    = S
movetype = A
physics = N
poweradd = 31
ctrl = 0
velset = 0,0
sprpriority = 2
juggle  = 8
anim = 1010

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1010,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1010,1
volume = 200

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(1010) && p2statetype = A && movehit
v = 45
value = 60

[State 0, Explod]
type = Explod
trigger1 = animelemtime(4)=0
anim = 1011
ID = 1011
pos = 0,0
postype = p1
bindtime = 1
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 4
attr = S, SA
damage = floor(66*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAFP
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s4,1
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 0,13
guard.pausetime = 0,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -2,-11
guard.velocity = -11.1796875
air.type = High
air.velocity = -2,-11
air.hittime = 13
air.juggle = 0
getpower = 31,31
givepower = 16,16
id = 1010
nochainid = 1010
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 57
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = 0.48

[State 1050, VarSet]
type = VarSet
trigger1 = 1
var(1) = movehit
ignorehitpause = 1

[State 1411, VarSet]
type = VarSet
trigger1 = numtarget(1010) && movehit
var(16) = 12
persistent = 0
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------
;Eins Trigger (Hard)
[Statedef 1015];Ok!
type    = S
movetype= A
physics = N
poweradd = 31
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 1015

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3)=2
id = 3008
anim = 3008
pos = 0,0
sprpriority = -2
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1000,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1000,1
volume = 200

[State 1000: Helper]
type = Helper
trigger1 = animelemtime(3) = 1
helpertype = Normal
name = "Eins Trigger Flame"
id = 1016
pos = 0, 0
postype = p1
facing = 1
stateno = 1016
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
persistent = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 43
value = 0

;Second Shoot
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "a"
var(43) = 1

;Second Shell
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "b"
var(43) = 2

;Blackout Weak
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdback" && command = "a"
var(43) = 3

;Blackout Hard
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdback" && command = "b"
var(43) = 4

;Minute Spike W.
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "x"
var(43) = 5

;Minute Spike H.
[State 0, VarSet]
type = VarSet
triggerall = Animelem = 4,>0 && Animelem = 8,<4
trigger1 = command = "holdfwd" && command = "y"
var(43) = 6

[State 0, ChangeState]
type = ChangeState
triggerall = Animelem = 7,>0 && Animelem = 8,<=3
trigger1 = var(43) = 1
trigger2 = var(59) && p2bodydist X > 60
value = 1005
ctrl = 0

[State 0, ChangeState]
type = ChangeState
triggerall = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 2
trigger2 = var(59) && p2bodydist X <= 60
value = 1010
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 3
value = 1020
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 4
value = 1025
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 5
value = 1030
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Animelem = 8,>0 && Animelem = 8,<=3
trigger1 = var(43) = 6
value = 1035
ctrl = 0

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Eins Trigger Proj
[Statedef 1016]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1001
sprpriority = 4
juggle = 10

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1005, nothitby]
type=nothitby
trigger1= 1
value=SCA
time=-1
ignorehitpause=1

[State 210, 1]
type = HitDef
triggerall = !root, var(55) && root,var(44)=0 && root,var(45)=0
trigger1 = animelem = 1
attr = S, SP
damage = floor(50*ifelse(root,var(56),1.25,1)),10
animtype = Hard
air.animtype = Up
guardflag = M
hitflag = MAF
priority = 3, Hit
sparkno = -1;s17002+(root,var(31)*10000)
sparkxy = -20, -40
hitsound = -1;s4,1
guardsound = -1;s3+(root,var(32)*2), 13
guard.sparkno = -1;s17502+(root,var(31)*10000)
ground.type = Low
pausetime = 0,4
guard.pausetime = 0,3
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 16,16
id = 1000
nochainid = 1000, 1005
air.fall = 1
fall = 0
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 35
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = .5

[State 3005, ContactSound]
type = PlaySnd
trigger1 = MoveContact && NumTarget
value = ifelse(MoveHit,4,5), ifelse(MoveHit,1,13)
persistent = 0

[State 3005, ContactSpark]
type = Explod
trigger1 = MoveContact && NumTarget
anim = ifelse(MoveHit,27002,27502)
ID = 27000
pos = 0,-50
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
shadow = 0,0,0
ownpal = 1
persistent = 0

[State 0, Projectile]
type = Projectile
trigger1 = !time
attr = S, SP
projanim = 1002
projpriority = 9999
projhitanim = -1
projremovetime = 15
offset = 0,0

[State 1411, VarSet]
type = ParentVarSet
trigger1 = numtarget(1000) && movehit
var(16) = 12
persistent = 0
ignorehitpause=1

[State 1050, VarSet]
type = VarSet
trigger1 = 1
var(1) = movehit
ignorehitpause = 1

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && root,var(24)
helpertype = normal
name = "K.O."
ID = 50001
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 1005, End]
type=destroyself
trigger1 = animtime = 0
trigger2 = (root, stateno = 1005) && root, animelem = 4
trigger3 = (root, stateno = 1010) && root, animelem = 3

;Weak Blackout followup
[Statedef 1020]
type    = S
movetype = A
physics = N
poweradd =0
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 8
anim = 1020

[State 170, G]
type = NotHitBy
trigger1 = animelem = 11, < 0
value = SCA,AP

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1020,1
volume = 200

[State 65000: AfterImage]
type = AfterImage
trigger1 = animelem = 4
time = 16
length = 4
palbright = 0,0,0
palcontrast = 0,0,0
paladd = -100,-100,-100
timegap = 4
framegap = 1
trans = add1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 8
x = 21
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 9
trigger2 = animelemtime(10)=0
x = 13
[State 0, PosAdd]
type = PosAdd
trigger1 = animelemtime(10)=1
x = 10
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 11
x = 20

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 5.5

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(11)>=0
x = 0.82393576882102272727272727272727

[State 0, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time < 15
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Hard Blackout followup
[Statedef 1025]
type    = S
movetype = A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 8
anim = 1025

[State 0, VelSet]
type = ctrlset
trigger1 = animelem = 6
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1020,1
volume = 200

[State 65000: AfterImage]
type = AfterImage
trigger1 = animelem = 4
time = 12
length = 4
palbright = 0,0,0
palcontrast = 0,0,0
paladd = -100,-100,-100
timegap = 4
framegap = 1
trans = add1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 26
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 24

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 7.8077850341796875

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(9)>0
x = 0.92082135507562181081942031421307

[State 0, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time < 16
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Weak Minute Spike followup
[Statedef 1030];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 1030

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1033
ID = 1033
pos = 20, -150
postype = p1
bindtime = 1
scale = 1,0.8
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1200,1

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(1030) && p2statetype = A && movehit
v = 45
value = 60

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 1
attr = S, SA
damage = floor(66*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAFP
priority = 6, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s4,1
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 0,13
guard.pausetime = 0,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -4,-6
guard.velocity = -11.1796875
air.type = High
air.velocity = -4,-6
air.hittime = 13
air.juggle = 0
getpower = 31,31
givepower = 16,16
id = 1030
nochainid = 1030
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 30
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = 0.48

[State 1050, VarSet]
type = VarSet
trigger1 = 1
var(1) = movehit
ignorehitpause = 1

[State 1411, VarSet]
type = VarSet
trigger1 = numtarget(1030) && movehit
var(16) = 12
persistent = 0
ignorehitpause=1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Hard Minute Spike followup
[Statedef 1035];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 1035

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 4,9
volume = -50

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1037
ID = 1037
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 1036
ID = 1036
pos = -20,10
postype = p1
bindtime = 15
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 9.53125

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 0.953125

[State 210, 1]
type = HitDef
triggerall = !var(55) || var(55) = 1030
trigger1 = animelem = 3
attr = A, SA
damage = floor(68*ifelse(var(56),1.25,1)),10
animtype = back
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -80
hitsound = s5,3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -5.5, -8.5
guard.velocity = -11.1796875
air.type = High
air.velocity =-5.5, -8.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1030
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
palfx.time = 30
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = 4,1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Weak Blackout
[Statedef 1100]
type    = S
movetype = A
physics = N
poweradd = 150
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 8
anim = 1100


[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1100,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1020,1
volume = 200

[State 65000: AfterImage]
type = AfterImage
trigger1 = animelem = 5
time = 16
length = 4
palbright = 0,0,0
palcontrast = 0,0,0
paladd = -100,-100,-100
timegap = 4
framegap = 1
trans = add1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 5

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
x = 9

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(14)>=0
x = 0.82393576882102272727272727272727

[State 0, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time < 23
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;Hard Blackout
[Statedef 1105]
type    = S
movetype = A
physics = N
poweradd = 200
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 8
anim = 1105


[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1100,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1020,1
volume = 200

[State 65000: AfterImage]
type = AfterImage
trigger1 = animelem = 5
time = 22
length = 4
palbright = 0,0,0
palcontrast = 0,0,0
paladd = -100,-100,-100
timegap = 4
framegap = 1
trans = add1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 10

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(14)>=0
x = 0.82393576882102272727272727272727

[State 0, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time < 34
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------
;Crow Bite Weak
[Statedef 1200];Ok!
type    = S
movetype= A
physics = N
poweradd = 93
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 1200

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1200,0
channel = 0
volume = 200

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1200,1
volume = 200

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
movetype = I

[State 0, HitBy]
type = HitBy
trigger1 = time < 3
value = SCA, NT,ST,HT

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) = 1
anim = 1202
ID = 1202
pos = -6,13
postype = p1
bindtime = 17
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 8
anim = 1203
ID = 1203
pos = 20,5
postype = p1
bindtime = 22
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 9
y = -6

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(9) > 0
y = 0.6

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 4
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -60
hitsound = 0
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -4.5,-6.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1200
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 56
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = 0.5

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 8
attr = A, SA
damage = ifelse(movehit,33,floor(83*ifelse(var(56),1.25,1))),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -70
hitsound = 0
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 8,9
guard.pausetime = 8,7
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -2,-11
guard.velocity = -11.1796875
air.type = High
air.velocity = -2,-11
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1201
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 56
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
persistent = 0
yaccel = 0.5

[State 1000: Helper]
type = PlaySnd
triggerall = numhelper(247)
triggerall = helper(247), var(1) = 1
trigger1 = numtarget(1200)
trigger2 = numtarget(1201)
value = 4,1
ignorehitpause = 1
[State 1000: Helper]
type = PlaySnd
triggerall = numhelper(247)
triggerall = helper(247), var(1) = 1
trigger1 = numtarget(1200)
trigger2 = numtarget(1201)
value = 3+(var(32)*2),3
ignorehitpause = 1

[State 1000, 6]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0

[Statedef 1201]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1201

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Crow Bite Hard
[Statedef 1205];Ok!
type    = S
movetype= A
physics = N
poweradd = 93
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 1205

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1200,0
channel = 0
volume = 200

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1200,1
volume = 200

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
movetype = I

[State 0, HitBy]
type = HitBy
trigger1 = time < 13
value = SCA, NT,ST,HT

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) = 1
anim = 1202
ID = 1202
pos = -6,13
postype = p1
bindtime = 17
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 8
anim = 1203
ID = 1203
pos = 20,5
postype = p1
bindtime = 22
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 9

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = 5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 7.25

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 5.3961334228515625

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(6) > 0 && animelemtime(9) < 0
x = 0.90625

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(9) >= 0
x = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 9
y = -9.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(9) > 0
y = 0.42578125

[State 0, Width]
type = Width
trigger1 = 1
value = 15,15

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 4
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -60
hitsound = 0
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1200
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 30
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = 0.5

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 8
attr = A, SA
damage = ifelse(movehit,33,floor(83*ifelse(var(56),1.25,1))),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -70
hitsound = 0
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 8,9
guard.pausetime = 8,7
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -2,-11
guard.velocity = -11.1796875
air.type = High
air.velocity = -2,-11
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1201
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 56
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
persistent = 0
yaccel = 0.5

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 10
attr = A, SA
damage = ifelse(movehit,8,floor(83*ifelse(var(56),1.25,1))),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -70
hitsound = 0
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 6,7
guard.pausetime = 6,5
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -2,-11
guard.velocity = -11.1796875
air.type = High
air.velocity = -2,-6.5
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1202
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 45
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
persistent = 0
yaccel = 0.5

[State 1000: Helper]
type = PlaySnd
triggerall = numhelper(247)
triggerall = helper(247), var(1) = 1
trigger1 = numtarget(1200)
trigger2 = numtarget(1201)
trigger3 = numtarget(1202)
value = 4,1
ignorehitpause = 1
[State 1000: Helper]
type = PlaySnd
triggerall = numhelper(247)
triggerall = helper(247), var(1) = 1
trigger1 = numtarget(1200)
trigger2 = numtarget(1201)
trigger3 = numtarget(1202)
value = 3+(var(32)*2),3
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 43
value = 0

;Secondary Bite
[State 0, VarSet]
type = VarSet
triggerall = animelem = 9,>0 && animelem = 13,<0
trigger1 = command = "holdfwd" && command = "a"
trigger2 = command = "holdfwd" && command = "b"
;A.I
trigger3 = var(59)=1
trigger4 = movehit
var(43) = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 13
trigger1 = var(43) = 1
value = 1210
ctrl = 0

[State 1000, 6]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = 1206
ctrl = 0

[Statedef 1206]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1206

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Tsuika Kougeki
[Statedef 1210]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = 31
ctrl = 0
anim = 1210
facep2 = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1200,1
volume = 200

[State 0, VelAdd]
type = VelAdd
trigger1 = time >= 0
y = 0.42578125

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 1
anim = 1211
ID = 1211
pos = 0,0
postype = p1
bindtime = 12
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
attr = A, SA
damage = floor(41*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -50
hitsound = 0
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = 0,0
air.type = High
air.velocity = -6,9
air.hittime = 2
getpower = 31,31
givepower = 16,16
air.fall = 1
air.fall.recover = 0
fall.recover = 0
p2stateno = 1250
id = 1210
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall.xvelocity = -2
fall.yvelocity = -6
fall.envshake.time = 14
fall.envshake.freq = 180
fall.envshake.ampl = -4
Palfx.time       = 25
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55) && P2Statetype = A
trigger1 = numtarget(1210)
var(55) = 1200
ignorehitpause = 1

[State 1000: Helper]
type = PlaySnd
triggerall = numhelper(247)
triggerall = helper(247), var(1) = 1
trigger1 = numtarget(1210)
value = 4,1
ignorehitpause = 1
[State 1000: Helper]
type = PlaySnd
triggerall = numhelper(247)
triggerall = helper(247), var(1) = 1
trigger1 = numtarget(1210)
value = 3+(var(32)*2),3
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1206
ctrl = 0

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1250]
type    = U;A
movetype= H
physics = N
ctrl = 0

[State 5030, 4]
type = ChangeState
trigger1 = !time
trigger1 = statetype != A
value = stateno + 4 ;HITA_FALL

[State 1250, StateTypeSet]
type = StateTypeSet
trigger1 = !time
statetype = A       ;S,A,C,L

[State 1250, ChangeAnim]
type = ChangeAnim
trigger1 = !hitshakeover;!time
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1107, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 5030, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = stateno + 1 ;HITA_FALL
;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 1251]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069]) && (Anim != [105051, 105059]) && (Anim != [105061, 105069])
trigger2 = Anim != 5090+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) ;Not if hit off ground anim
value = 5050+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [105050,105059]
trigger1 = Vel Y >= ifelse(anim = 105050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = stateno + 1 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 1252]
type    = L
movetype= H
physics = N

[State 1352, NotHitBy]
type = NotHitBy
trigger1 = time < 6
value = SCA
time = 1

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim2
trigger1 = !time
value = stateno+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*30000)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "cvsfelicia" && authorname = "Jesuszilla"
trigger1 = !time
value = 5100

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = time = 5
value = stateno + 1

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1253]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = animtime = 0
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 1207, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),-gethitvar(fall.xvel),gethitvar(fall.xvel))
y = gethitvar(fall.yvel)

[State 5101, 4]
type = PosSet
trigger1 = animelem = 3
y = 10

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 1254]
type    = S
movetype= H
physics = N
velset = 0,0
p2facing = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000),5010+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = stateno + 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 1255]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = SelfState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = stateno + 1;5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1256]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger1 = anim != [105101,105109]
trigger2 = !SelfAnimExist(5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [105101,105109]
trigger1 = SelfAnimExist(5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10)

[State 1256, VelSet]
type = VelSet
trigger1 = time = 0
y = -4.5

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110

;-------------------------------------------------------------------------------
;Weak Minute Spike
[Statedef 1300];Ok!
type    = S
movetype= A
physics = N
poweradd = 109
ctrl = 0
velset = 0
sprpriority = 2
anim = 1300

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 1400, AUTOGUARD]
type = ReversalDef
trigger1 = animelem = 1
trigger2 = animelem = 2
attr = S, SP
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
numhits = 0
pausetime = 12,12
sparkxy = 0,0;-10, -40
sparkno = s17502+(var(31)*10000)
hitsound = s3+(var(32)*2), 13

[State 0, HitBy]
type = HitBy
trigger1 = time < 4
value = SCA, NT,ST,HT

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1030,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1030,1
volume = -50

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 7.625

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(4) > 0
x = 0.953125

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
y = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(4) > 0
y = 0.36

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 10
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 7

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 11
x = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 12
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 13
x = 5

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 10
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 8
attr = A, SA
damage = floor(66*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -80
hitsound = s5,9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -5.5, -8.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5, -8.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 31,31
id = 1300
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.envshake.time = 14
fall.envshake.freq = 180
fall.envshake.ampl = -4

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1300
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = 1301
ctrl = 0

[Statedef 1301]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1301

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Hard Minute Spike
[Statedef 1305];Ok!
type    = S
movetype= A
physics = N
poweradd = 109
ctrl = 0
velset = 0
sprpriority = 2
anim = 1305

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = time < 3
value = SCA, NT,ST,HT

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1030,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1030,1
volume = -50

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 9.53125

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(4) > 0
x = 0.953125

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(4) > 0
y = 0.39

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 10
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 7

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 11
x = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 12
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 13
x = 5

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 10
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 8
attr = A, SA
damage = floor(66*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -75
hitsound = s5,9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -5.5, -8.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5, -8.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 31,31
id = 1300
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.envshake.time = 14
fall.envshake.freq = 180
fall.envshake.ampl = -4

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1300
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = 1306
ctrl = 0

[Statedef 1306]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1306

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Narrow Spike
[Statedef 1310]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd = 31
ctrl = 0
velset = 0,0
anim = 1310
facep2 = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1007

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
movetype = I

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 7
x = 16

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 9.208221435546875

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 0.92082290751818648814356968863407

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 3
attr = S, SA
damage = floor(75*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = L
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -20
hitsound = s5,9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -4.5, -6.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 31,31
id = 1310
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(1310) && p2statetype = A && movehit
v = 44
value = 60

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 43
value = 0

[State 0, VarSet]
type = VarSet
triggerall = Animelem = 7,>0 && Animelem = 10,<=3
trigger1 = command = "dp_x"
var(43) = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
trigger1 = var(43) = 1
value = 1200
ctrl = 0

[State 0, VarSet]
type = VarSet
triggerall = Animelem = 7,>0 && Animelem = 10,<=3
trigger1 = command = "dp_y"
var(43) = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
trigger1 = var(43) = 2
value = 1205
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;Weak Aerial Minute Spike
[Statedef 1320];Ok!
type    = A
movetype= A
physics = N
poweradd = 109
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1320

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1030,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1030,1
volume = -50

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 9.53125

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 0.953125

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
y = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(3) > 0
y = 0.36

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 18

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 12

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 10
x = 8

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
attr = A, SA
damage = floor(66*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -75
hitsound = s5,9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -5.5, -8.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5, -8.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 31,31
id = 1300
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1300
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = 1301
ctrl = 0

;Hard Aerial Minute Spike
[Statedef 1325];Ok!
type    = A
movetype= A
physics = N
poweradd = 109
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1325

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1030,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1030,1
volume = -50

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 9.53125

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 0.953125

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(3) > 0
y = 0.39

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 13

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = 18

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 12

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 10
x = 9

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
attr = A, SA
damage = floor(66*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -75
hitsound = s5,9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -5.5, -8.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5, -8.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 31,31
id = 1300
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5

[State -2, Juggle Killer]
type = VarSet
triggerall = !Var(55)
trigger1 = movehit && P2Statetype = A
var(55) = 1300
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = 1306
ctrl = 0

;-------------------------------------------------------------------------------
;EX Air Trigger
[Statedef 1400]
type    = A
movetype = A
physics = N
poweradd = 109
ctrl = 0
sprpriority = 2
juggle  = 8
anim = 1400
facep2 = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
trigger1 = Pos Y < -10

[State 210, 1]
type = Projectile
triggerall = !root, var(55)
trigger1 = animelem = 6
projID = 1402
projanim = 1402
projhitanim = -1
projremanim = 1403
projcancelanim = -1
offset = 41,-51
projpriority = 1
projsprpriority = 4
velocity = 3, 4
attr = A, SP
damage = 53,10
animtype = Hard
guardflag = M
hitflag = MAF
sparkno = s27002
sparkxy = -10, 0
hitsound = s4,1
guardsound = s5,13
guard.sparkno = s27502
ground.type = Low
pausetime = 0,13
guard.pausetime = 0,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -3
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 16,16
nochainid = 1402
air.fall = 1
fall = 0
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 35
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = .5

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) = 1
anim = 1401
ID = 1401
pos = 0,0
postype = p1
bindtime = 16
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1400,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 1400,1
volume = 200

[State 0, PosSet]
type = PosSet
trigger1 = statetype = A
trigger1 = Pos Y >= -10 && animelem = 7, < 0
y = -10

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1404
ctrl = 0

[Statedef 1450]
type    = A
movetype = A
physics = N
poweradd = 109
ctrl = 0
velset = 0,0
sprpriority = 2
juggle  = 8
anim = 1400
facep2 = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 0, VarAdd]
type = VarAdd
triggerall = var(50)
triggerall = var(33)
triggerall = !time
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(51) = -128
persistent = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 8
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
triggerall = var(50)
triggerall = var(51)
triggerall = var(33)
triggerall = time < 9
trigger1 = (prevstateno = [200,2999]) && var(51)>0
trigger2 = prevstateno = 800 && var(51)>0
var(52) = time
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -6

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 6, >= 0
y = .48

[State 0, VelAdd]
type = VelMul
trigger1 = animelem = 6, >= 0
x = .95

[State 210, 1]
type = Projectile
triggerall = !root, var(55)
trigger1 = animelem = 6
projID = 1402
projanim = 1402
projhitanim = -1
projremanim = 1403
projcancelanim = -1
offset = 41,-51
projpriority = 1
projsprpriority = 4
velocity = 4, 5
attr = A, SP
damage = 53,10
animtype = Hard
guardflag = M
hitflag = MAF
sparkno = s27002
sparkxy = -10, 0
hitsound = s4,1
guardsound = s5,13
guard.sparkno = s27502
ground.type = Low
pausetime = 0,13
guard.pausetime = 0,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -3,-5
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 93,93
givepower = 16,16
nochainid = 1402
air.fall = 1
fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 35
Palfx.add       = 40,-70,-200
Palfx.sinadd   = 40,30,0,10
Palfx.color     = 0
Palfx.invertall = 1
yaccel = .5

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) = 1
anim = 1401
ID = 1401
pos = 0,0
postype = p1
bindtime = 16
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1400,0
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 1400,1
volume = 200

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1404
ctrl = 0

[Statedef 1404]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1404

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Heat Drive DM
[Statedef 3000];Ok!
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 3000

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(18) = ifElse(Command = "x",0,1)

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,2999]
var(54) = 1

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,2999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 6001, pause]
type = SuperPause
trigger1 = !var(53) && time = 1
time = 28
movetime = 18
anim = -1
darken = 0
poweradd = -1000-((prevstateno = [1000,2999])-(var(51) > 0))*1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 51
value = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 3000,0
channel = 0
volume = 200
persistent = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),10

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 26

[State 13000, EnvColor]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 4000]
type = EnvColor
trigger1 = !var(53) && time = 1
value = 0, 0, 0
time = 28
under = 1

[State 6001, pause]
type = Explod
trigger1 = !var(53) && time = 1
anim = 15200-(var(31)*200)
pos = 11,-91
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15201-(var(31)*200)
pos = 11,-91
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
sprpriority = 4
ownpal = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NT,ST,HT

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5)=0
id = 3005
anim = 3005
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
removetime = 250
ownpal = 1
removeongethit = 1
bindtime = -1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5)=0
id = 3008
anim = 3008
pos = 0,0
sprpriority = -2
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 3001
ctrl = 0

[Statedef 3001];Ok!
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 3001

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 27
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 120
v = 27
value = 1

[State 1000, 6]
type = ChangeState
trigger1 = !var(18) && command != "hold_x"
trigger2 = var(18) && command != "hold_y"
trigger3 = time = 120
;A.I
trigger4 = var(59)=1
value = 3002
ctrl = 0

[Statedef 3002];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = ifelse(!var(18),3002,3003)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 4,9
volume = 200

[State 0, Explod]
type = Explod
trigger1 = animelemtime(1)=0
id = 3006
anim = 3006
pos = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 0
bindtime = 1
supermovetime = 999
pausemovetime = 999

[State 810, 1]
type = AfterImage
trigger1 = animelem = 3
time = 999
length = 5
framegap = 1
palcontrast = 256,256,256
paladd = 0,0,40
palmul = 1,1,1
trans = add1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(5)>=0 && animelemtime(7)<0
value = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(7)>=0
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = var(27)
trigger1 = 1
flag = unguardable

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 3005

[State 13000, EnvColor]
type = EnvColor
trigger1 = movehit = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 16

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 19

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = -11

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 8.4791412353515625

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(7)>0
x = 0.92082261840705862451839068255805

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
attr = S, HA
damage = floor(208*ifelse(var(56),1.25,1))+50*var(27),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -70
hitsound = 0
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 1,1
guard.pausetime = 1,1
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -4.5, -6.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3000
fall = 1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
yaccel = 0.45

[State 1200, 0]
type = TargetState
trigger1 = numtarget && movehit && p2movetype = H
value = 3009
ignorehitpause = 0
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = numtarget && movehit && p2movetype = H
value = 3004
ignorehitpause = 0
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 40
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = animelemtime(3)>0
trigger1 = frontedgebodydist <= 5
v = 40
value = 5
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = animelemtime(7)<0
trigger1 = var(40)=1
value = 3010
ctrl = 0

[State 1000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3004];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 3004

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && var(24)
helpertype = normal
name = "K.O."
ID = 50001
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(1)=0
id = 3007
anim = 3007
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 1
bindtime = 7

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 9

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = -11

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 9.208221435546875

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(1)>0
x = 0.92082290751818648814356968863407

[State 1000: Helper]
type = PlaySnd
trigger1 = !time
value = 12,6
ignorehitpause = 1
volume = 200
persistent = 0
[State 1000: Helper]
type = PlaySnd
trigger1 = !time
value = 4,8
ignorehitpause = 1
volume = 200
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3010];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 3010

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 1
x = 9

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = -11

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 9.208221435546875

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(1)>0
x = 0.92082290751818648814356968863407

[State 1000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------
;Spinning Fall
[Statedef 3009]
type = A
movetype = H
physics = N
velset = 0, 0
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, ChangeAnim]
type = ChangeAnim2
trigger1 = time = 0
value = 3009

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = -2
y = -17

[State 0, VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .6

[State 5110, 6]
type = PlaySnd
trigger1 = Pos Y >= -15 && Vel Y > 0
value = F7, 0

[State 0, SelfState]
type = ChangeState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 6201

[Statedef 6201]
type = A
movetype = H
physics = N
velset = 0, 0

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 20
ampl = -8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5100+ifelse(SelfAnimexist(5101),1,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 6202

[Statedef 6202]
type = A
movetype = H
physics = N
velset = 0, 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = -1.5
y = -3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5160+ifelse(SelfAnimexist(5161),1,0)

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .525

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= -2 && Vel Y > 0
value = 5110

;----------------------------------------
;Chain Drive DM
[Statedef 3100];Ok!
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 3100

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,2999]
var(54) = 1

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,2999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 6001, pause]
type = SuperPause
trigger1 = !var(53) && time = 1
time = 28
movetime = 2
anim = -1
darken = 0
p2defmul = 1
poweradd = -1000-((prevstateno = [1000,2999])-(var(51) > 0))*1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 51
value = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 3100,0
channel = 0
volume = 200
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 3100,2
volume = 200

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 26

[State 13000, EnvColor]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 4000]
type = EnvColor
trigger1 = !var(53) && time = 1
value = 0, 0, 0
time = 29
under = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 5,10

[State 6001, pause]
type = Explod
trigger1 = !var(53) && time = 1
anim = 15200-(var(31)*200)
pos = -2,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15201-(var(31)*200)
pos = -2,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
sprpriority = 4
ownpal = 1

[State 0, HitBy]
type = HitBy
trigger1 = time < 34
value = SCA, NT,ST,HT

[State 0, Helper]
type = Helper
trigger1 = animelemtime(6) = 1
helpertype = normal
name = "Sunglasses"
ID = 3101
stateno = 3101
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = helper(3101),movehit
value = 3104

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Sunglasses
[Statedef 3101]
type = S
movetype = A
physics = N
anim = 3101

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 7
y = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = time >= 8
y = .5

[state 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 3102
time = -1

[State 210, 1]
type = HitDef
triggerall = !root, var(55)
trigger1 = animelem = 1
attr = S, HP
damage = floor(33*ifelse(root,var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 3, Hit
sparkno = s27003
sparkxy = -20, -65
hitsound = s5,3
guardsound = s3+(root,var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 0,8
guard.pausetime = 0,7
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower =0,0
givepower = 16,16
id = 3101
air.fall = 1
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State 1411, VarSet]
type = ParentVarSet
trigger1 = numtarget(3101) && movehit
var(16) = 16
persistent = 0
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
trigger2 = time = 300
value = 3102
ctrl = 0

[Statedef 3102]
ctrl = 0
anim = 3102
velset = 0,0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
v = 34
value = 1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,stateno = 3105

[Statedef 3103]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = ifelse(prevstateno=3104,3103,3113)
facep2 = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 11.67333984375

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(1) > 0
x = 0.75726774584849625632659890408667

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 1
x = 13

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 8

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3104];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 3104

[State 0, Explod]
type = Explod
trigger1 = time = 6
anim = 3105
ID = 3105
pos = 0,0
postype = p1
bindtime = 1
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 16

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3100,3
volume = 200

[State 13000, EnvColor]
type = EnvColor
trigger1 = movehit = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
trigger1 = p2life > 0
attr = S, HA
damage = floor(58*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -10, -70
hitsound = s5,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 1,2
guard.pausetime = 1,1
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3104
fall = 0
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

[State 0, TargetState]
type = TargetState
trigger1 = numtarget && movehit && p2movetype = H
value = 3107
ignorehitpause = 0
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 3105
ctrl = 0

[State 1000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 3103
ctrl = 0

[Statedef 3105]
type     = S
movetype = A
physics  = N
anim     = 3115
velset   = 0,0
ctrl     = 0
sprpriority = 2

[State 3106, o]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3106, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = Normal
name = "Megane"
stateno = 3125
ID = 3127
helpertype = Normal
pos = 0,0
postype = P1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State rg]
type = Pause
trigger1 = 1
movetime = 2
time = 2

[State 3106, ]
type = Width
trigger1 = 1
edge = 60,0

[State 3106, TargetBind]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 3106, o]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3106, ]
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 20000
postype = P1
pos = 50,-90
sprpriority = 10
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 3106, PlaySnd]
type = PlaySnd
Trigger1 = AnimElem = 5
value = s12,0

[State 3106, `]
type = ChangeState
trigger1 = AnimTime = 0
value = 3106

[Statedef 3125]
type     = A
movetype = I
physics  = N
anim     = 3125
velset   = .6,-6.5
ctrl     = 0

[State 1000, PosSet]
type = PosSet
trigger1 = time = 0
y = -80

[State 1100, VelAdd]
type = VelAdd
trigger1 = 1
y = .2

[State 3000, `]
type = DestroySelf
trigger1 = Root,Anim = 3115 && Root,AnimElem = 5
trigger2 = Root,Anim = 3215 && Root,AnimElem = 5
trigger3 = Vel Y > 0 && Pos Y >= 0
trigger4 = Time = 120

[Statedef 3106]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3106
facep2 = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time < 92
time = 1
pos = 50,0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(42)<0
x = 2
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 42
x = 0

[State 0, Width]
type = Width
trigger1 = 1
value = 25,5
edge = 55,35

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 13000, EnvColor]
type = EnvColor
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 19
trigger4 = animelem = 21
trigger5 = animelem = 29
trigger6 = animelem = 38
trigger7 = animelem = 40
trigger8 = animelem = 11
trigger9 = animelem = 15
trigger10 = animelem = 24
trigger11 = animelem = 33
trigger12 = animelem = 46
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

;Punches Light
[State 210, 1]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
attr = S, HA
damage = floor(14*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -60
hitsound = s5,1
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;Punches Hard
[State 210, 1]
type = HitDef
trigger1 = animelem = 19
trigger2 = animelem = 21
trigger3 = animelem = 29
trigger4 = animelem = 38
trigger5 = animelem = 40
attr = S, HA
damage = floor(14*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30-(random%40)
hitsound = s5,3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;Kicks Light
[State 210, 1]
type = HitDef
trigger1 = animelem = 11
trigger2 = animelem = 15
attr = S, HA
damage = floor(14*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30
hitsound = s5,5
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = Low
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;Kicks Hard
[State 210, 1]
type = HitDef
trigger1 = animelem = 24
trigger2 = animelem = 33
attr = S, HA
damage = floor(15*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30-(random%40)
hitsound = s5,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = Low
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;Final Hit
[State 210, 1]
type = HitDef
trigger1 = animelem = 46
attr = S, HA
damage = floor(4*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -65
hitsound = s5,9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 32,33
guard.pausetime = 32,33
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3116
fall = 1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 1
forcestand = 1
p2stateno = 13100
palfx.time = 65
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 46 && movehit
value = 4,7

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 45
v = 16
value = 24

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1


[State 5100, EnvShake]
type = EnvShake
trigger1 = animelem = 46
time = 10
freq = 180
ampl = -4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 45
value = 3100,1
volume = 200
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 113
value = 12,11
volume = 200
channel = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3107]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = NULL
trigger1 = time = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3107

;Hit By One Inch Punch (For Pausetime)
[Statedef 13100]
type    = S
movetype= H
physics = N
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000),5010+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + GetHitVar(animtype)))
value = 5047+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 13101

;Hit By One Inch Punch (Air Fall)
[Statedef 13101]
type    = A
movetype= H
physics = N
velset = 0,0

[State 181, 1]
type = null;NotHitBy
trigger1 = 1
value = SCA

[State 3340, Vel]
type = VelSet
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),5,-5)
y = -6

[State 3340, Gravity]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 3340, Anim 5050]
type = ChangeAnim
trigger1 = !selfanimexist(5061)
trigger1 = !time
persistent = 0
value = 5050+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 3340, Anim 5050]
type = ChangeAnim
trigger1 = selfanimexist(5061)
trigger1 = !time
persistent = 0
value = 5061

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 13102 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [105051,105059]) || (anim = [105061,105069]), 0, 25)
value = 13102 ;HIT_BOUNCE

;Hit By One Inch Punch (Slide)
[Statedef 13102]
type    = S
movetype= H
physics = N
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !selfanimexist(5101)
trigger1 = !time
value = 10802

[State 803, ChangeAnim2]
type = ChangeAnim
trigger1 = selfanimexist(5101)
trigger1 = !time
value = 5101

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State InitVel]
type = VelSet
trigger1 = !time
X = ifelse((facing=enemynear,facing),3.56535983085632,-3.56535983085632)

[State Accel]
type = VelAdd
trigger1 = Vel X != 0
X = ifelse((facing=enemynear,facing),-0.176470592617989,0.176470592617989)

[State 802, VelSet]
type = VelSet
trigger1 = Time = 20
x = 0

[State 802, SelfState]
type = ChangeState
trigger1 = Vel X = 0
value = 13103

;Hit By One Inch Punch (Liedown)
[Statedef 13103]
type    = S
movetype= H
physics = N

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !selfanimexist(5111)
trigger1 = !time
value = 10803

[State 803, ChangeAnim]
type = ChangeAnim
trigger1 = selfanimexist(5111)
trigger1 = !time
value = 5111

[State 803, SelfState]
type = SelfState
trigger1 = time = 10
value = Ifelse(alive,5120,5150)

;----------------------------------------
;Chain Drive SDM
[Statedef 3110];Ok!
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 3110

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,2999]
var(54) = 1

[State 6001, pause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
sound = s3,17
p2defmul = 1
poweradd = -2000-((prevstateno = [1000,2999])-(var(51) > 0))*1000

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,2999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 51
value = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 3100,0
channel = 0
volume = 200
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 3100,2
volume = 200

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 26

[State 13000, EnvColor]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,29]
flag = noBG
flag2 = noFG

[State 3050, BGPalfx]
type = BGPalfx
trigger1 = time >= 30
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15300-(var(31)*200)
pos = -2,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15301-(var(31)*200)
pos = -2,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 0, HitBy]
type = HitBy
trigger1 = time < 35
value = SCA, NT,ST,HT

[State 0, Helper]
type = Helper
trigger1 = animelemtime(6) = 1
helpertype = normal
name = "Sunglasses"
ID = 3111
stateno = 3111
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = helper(3111),movehit
value = 3114

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Sunglasses
[Statedef 3111]
type = S
movetype = A
physics = N
anim = 3101

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 7
y = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = time >= 8
y = .5

[state 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 3102
time = -1

[State 210, 1]
type = HitDef
triggerall = !root, var(55)
trigger1 = animelem = 1
attr = S, HP
damage = floor(33*ifelse(root,var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 3, Hit
sparkno = s27003
sparkxy = -20, -65
hitsound = s5,3
guardsound = s3+(root,var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 0,8
guard.pausetime = 0,7
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower =0,0
givepower = 16,16
id = 3101
air.fall = 1
fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State 1411, VarSet]
type = ParentVarSet
trigger1 = numtarget(3101) && movehit
var(16) = 16
persistent = 0
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
trigger2 = time = 300
value = 3112
ctrl = 0

[Statedef 3112]
ctrl = 0
anim = 3102
velset = 0,0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
v = 34
value = 1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,stateno = 3215

[Statedef 3114];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 3104

[State 3050, BGPalfx]
type = BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 6
anim = 3105
ID = 3105
pos = 0,0
postype = p1
bindtime = 1
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 16

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3100,3
volume = 200

[State 13000, EnvColor]
type = EnvColor
trigger1 = movehit = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 5
trigger1 = p2life > 0
attr = S, HA
damage = floor(20*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -10, -70
hitsound = s5,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 1,2
guard.pausetime = 1,1
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3104
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

[State 0, TargetState]
type = TargetState
trigger1 = numtarget && movehit && p2movetype = H
value = 3107
ignorehitpause = 0
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 3215
ctrl = 0

[State 1000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 3103
ctrl = 0

[Statedef 3215]
type     = S
movetype = A
physics  = N
anim     = 3215
velset   = 0,0
ctrl     = 0
sprpriority = 2

[State 3050, BGPalfx]
type = BGPalfx
trigger1 = 1
invertall = 1
time = 5
mul = 120,120,120
ignorehitpause = 1

[State 3106, o]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3106, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = Normal
name = "Megane"
stateno = 3125
ID = 3127
helpertype = Normal
pos = 0,0
postype = P1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State rg]
type = Pause
trigger1 = 1
movetime = 2
time = 2

[State 3106, ]
type = Width
trigger1 = 1
edge = 60,0

[State 3106, TargetBind]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 3106, o]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3106, ]
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 20000
postype = P1
pos = 50,-90
sprpriority = 10
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 3106, PlaySnd]
type = PlaySnd
Trigger1 = AnimElem = 5
value = s12,0

[State 3106, `]
type = ChangeState
trigger1 = AnimTime = 0
value = 3116

[Statedef 3116]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3135;3116
facep2 = 0

[State 3050, BGPalfx]
type = BGPalfx
trigger1 = 1
invertall = 1
time = 5
mul = 120,120,120
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = time < 148
time = 1
pos = 50,0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 90
x = 16

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 91
x = 12

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(80)<0
x = 1
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 92
x = 5
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 80
trigger2 = animelem = 96
x = 0

[State 0, Width]
type = Width
trigger1 = 1
value = 25,5
edge = 55,35

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 13000, EnvColor]
type = EnvColor
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 19
trigger4 = animelem = 21
trigger5 = animelem = 29
trigger6 = animelem = 37
trigger7 = animelem = 39
trigger8 = animelem = 11
trigger9 = animelem = 15
trigger10 = animelem = 24
trigger11 = animelem = 32
trigger12 = animelem = 84
trigger13 = animelem = 98
trigger14 = animelem = 42
trigger15 = animelem = 44
trigger16 = animelem = 57
trigger17 = animelem = 59
trigger18 = animelem = 67
trigger19 = animelem = 76
trigger20 = animelem = 78
trigger21 = animelem = 49
trigger22 = animelem = 62
trigger23 = animelem = 71
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

;Punches Light
[State 210, 1]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
attr = S, HA
damage = floor(4*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -60
hitsound = s5,1
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;FLAMIN' Punches Light
[State 210, 1]
type = HitDef
trigger1 = animelem = 42
trigger2 = animelem = 44
attr = S, HA
damage = floor(4*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -60
hitsound = s5,1
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 2,2
guard.pausetime = 2,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1
palfx.time = 3
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

;Punches Hard
[State 210, 1]
type = HitDef
trigger1 = animelem = 19
trigger2 = animelem = 21
trigger3 = animelem = 29
trigger4 = animelem = 37
trigger5 = animelem = 39
attr = S, HA
damage = floor(10*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30-(random%40)
hitsound = s5,3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;FLAMIN' Punches Hard
[State 210, 1]
type = HitDef
trigger1 = animelem = 57
trigger2 = animelem = 59
trigger3 = animelem = 67
trigger4 = animelem = 76
trigger5 = animelem = 78
attr = S, HA
damage = floor(14*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30-(random%40)
hitsound = s5,3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 2,2
guard.pausetime = 2,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1
palfx.time = 3
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

;Kicks Light
[State 210, 1]
type = HitDef
trigger1 = animelem = 11
trigger2 = animelem = 15
attr = S, HA
damage = floor(6*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30
hitsound = s5,5
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = Low
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;FLAMIN' Kicks Light
[State 210, 1]
type = HitDef
trigger1 = animelem = 49
trigger2 = animelem = 53
attr = S, HA
damage = floor(6*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30
hitsound = s5,5
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = Low
pausetime = 2,2
guard.pausetime = 2,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1
palfx.time = 3
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

;Kicks Hard
[State 210, 1]
type = HitDef
trigger1 = animelem = 24
trigger2 = animelem = 32
attr = S, HA
damage = floor(16*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30-(random%40)
hitsound = s5,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = Low
pausetime = 3,2
guard.pausetime = 3,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1

;FLAMIN' Kicks Hard
[State 210, 1]
type = HitDef
trigger1 = animelem = 62
trigger2 = animelem = 71
attr = S, HA
damage = floor(18*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -30-(random%40)
hitsound = s5,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = Low
pausetime = 2,2
guard.pausetime = 2,1
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1
palfx.time = 3
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

;doshita
[State 210, 1]
type = HitDef
trigger1 = animelem = 84
attr = S, HA
damage = floor(18*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -65
hitsound = s4,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 1,17
guard.pausetime = 1,17
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -1.5
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3115
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 50,0
kill = 0
forcestand = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

;AH!
[State 210, 1]
type = HitDef
trigger1 = animelem = 98
attr = S, HA
damage = floor(20*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -65
hitsound = s4,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 32,33
guard.pausetime = 32,33
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -5.5,-8.5
guard.velocity = 0
air.type = High
air.velocity = -5.5,-8.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3116
fall = 1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
kill = 0
p2stateno = 3217
forcestand = 1
palfx.time = 65
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 0, TargetState]
type = TargetState
trigger1 = animelem = 85
value = 3117
ID = 3115

[State 0, Explod]
type = Explod
trigger1 = animelem = 85
anim = 3136
ID = 3118
pos = 0,0
postype = p1
bindtime = 1
scale = 1,1
sprpriority = -2
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 84
anim = 12510
ID = 12510
pos = 30,-58
postype = p1
bindtime = 1
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 84
anim = 12510
ID = 12510
pos = 65,-65
postype = p1
bindtime = 1
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 84
anim = 12510
ID = 12510
pos = 65,-100
postype = p1
bindtime = 1
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 84
anim = 12510
ID = 12510
pos = 50,-58
postype = p1
bindtime = 1
scale = .6,.6
sprpriority = 5
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 84
anim = 12510
ID = 12510
pos = 30,-100
postype = p1
bindtime = 1
scale = .6,.6
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 84
trigger2 = animelem = 97
v = 16
value = 24

[State 5100, EnvShake]
type = EnvShake
trigger1 = animelem = 84
trigger2 = animelem = 97
time = 10
freq = 180
ampl = -4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 97
value = 3100,1
volume = 200
channel = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 98, = 10
value = 3400

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3117]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = -4.5

[State 0, VelMul]
type = VelMul
trigger1 = time > 1
x = 0.95

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3117

[Statedef 3217]
type = S
physics = S
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 12
x = -15

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5016
;----------------------------------------
;Crimson Star Road HSDM
[Statedef 3200];Ok!
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1
anim = 3200

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 3
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40003)
trigger1 = time = 25
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40004)
trigger1 = time = 25
helpertype = normal
name = "Player 1"
ID = 40004
stateno = 40004
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 6001, pause]
type = Explod
trigger1 = animelemtime(2)=1
anim = 15500
pos = -5,-85
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = animelemtime(2)=1
anim = 15501
pos = -5,-85
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 6001, pause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
sound = s3,15
p2defmul = 1
poweradd = -3000-((prevstateno = [1000,2999])-(var(51) > 0))*1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 51
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = time < 5
value = SCA, NT,ST,HT

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3200,0
volume = 200
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 5

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(10)<0
x = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 10
x = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 9
time = 16
length = 5
framegap = 1
timegap = 2
trans = none
palcontrast = 255,255,255
paladd = 0,0,0
palmul = 1,1,1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 9
attr = S, HA
damage = 0,0
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27002
sparkxy = 0, -70
hitsound = s5,3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 0,12
guard.pausetime = 0,12
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity = -4.5, -6.5
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3200
fall = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
snap = 25,0
kill = 0
forcestand = 1

[State 1200, 0]
type = TargetState
trigger1 = numtarget && movehit && p2movetype = H
value = 3203
ignorehitpause = 0
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = numtarget && movehit && p2movetype = H
value = 3201
ignorehitpause = 0
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3201]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3201
facep2 = 1
sprpriority = -5

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = !time
time = 0

[State 0, Helper]
type = Null
trigger1 = animelemtime(2)=0
helpertype = normal ;player
name = "The Eye"
ID = 3210
stateno = 3210
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = time >= 13 && time <= 87
trigger1 = gametime%2
anim = 3210
ID = 3210
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 1,1
sprpriority = -4
ontop = 0
ownpal = 1
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 3200,1
volume = 200
channel = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 1
value = 0, 0, 0
time = 88
under = 1
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 1
time = 1
pos = 25,0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(2) > 0
x = 1

[State 0, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3202
ctrl = 0

[Statedef 3202]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3202
facep2 = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 2

[State 0, TargetBind]
type = TargetBind
trigger1 = frontedgebodydist <= 5
trigger2 = backedgebodydist <= 5
time = 1
id = -1
pos = -55,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelem = 23, < 0
flag = noBG
flag2 = noFG

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 3200,2
volume = 200
channel = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 1
value = 0, 0, 0
time = 118
under = 1
ignorehitpause = 1
persistent = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = animelemtime(20)=1
value = 255, 255, 255
time = 3
under = 1
ignorehitpause = 1

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 9
trigger2 = animelem = 10
trigger3 = animelem = 11
trigger4 = animelem = 12
trigger5 = animelem = 13
trigger6 = animelem = 14
trigger7 = animelem = 16
value = 255, 255, 255
time = 1
under = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 210, 1]
type = HitDef
trigger1 = animelemtime(15)=2
attr = S, HA
damage = floor(40*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = 0, -70
hitsound = s4,6
guardsound = s4,6
guard.sparkno = s27502
ground.type = High
pausetime = 0,23
guard.pausetime = 0,23
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0, -11
guard.velocity = 0
air.type = High
air.velocity = 0, -11
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 1
air.fall = 1
fall.recover = 0
air.fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
kill = 1
forcestand = 1
id = 3202
envshake.time = 24
envshake.freq = 180
envshake.ampl = -4
palfx.time = 90
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 3204

[State 1411, VarSet]
type = VarSet
trigger1 = animelem = 14
var(16) = 24
persistent = 0
ignorehitpause=1

[State 0, Explod]
type = Explod
trigger1 = animelem = 16
id = 12512
anim = 12512
pos = 47,-110
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 9
trigger2 = animelem = 10
trigger3 = animelem = 11
trigger4 = animelem = 12
trigger5 = animelem = 13
trigger6 = animelem = 14
helpertype = normal
stateno = 3206
name = "Explosions"
postype = p2
pos = 0,0
keyctrl = 0
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3203]
type = S
physics = S
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3203

[Statedef 3210]
type=S
physics=N
movetype=A
ctrl=0
anim=3210
sprpriority=-2
velset =0,0

[State 0, AfterImage]
type = AfterImage
trigger1 = !time
time = 100
length = 12
framegap = 1
timegap = 2
trans = none
palcontrast = 255,255,255
paladd = 0,0,0
palmul = 1,1,1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 105
facing = 1
pos = 0,0

[State 1005, End]
type=destroyself
trigger1= time = 105

[Statedef 3206]
type = A
movetype = A
physics = N
velset = 0, 0
sprpriority = 5
anim = 3206
ctrl = 0
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 210, 1]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage = floor(62*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = -1;S27003
sparkxy = 0, -20
hitsound = s4,1
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 1,0
guard.pausetime = 0,0
ground.slidetime = 17
ground.hittime = 40
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0, -6
guard.velocity = 0
air.type = High
air.velocity = 0, -6
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
fall = 1
air.fall = 1
fall.recover = 0
air.fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
kill = 0
forcestand = 1
palfx.time = 10
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 0, Explod]
type = Explod
trigger1 = time = 1
id = 27003
anim = 27003
pos = 0,-40
postype = p2
random = 0,40
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 0, Explod]
type = Explod
trigger1 = !numexplod(27000)
trigger1 = time = 1
id = 27000
anim = 27000
pos = 0,0
postype = p2
random = 0,40
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 3204]
type = A
movetype = H
physics = N

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 3009

[State 0, ChangeState]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3205

[Statedef 3205]
type = A
movetype = H
physics = N
velset = 1.8,-13.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = .5

[State 0, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Pos Y >= -15 && Vel Y > 0
trigger1 = SelfAnimexist(5061)
value = 5061

[State 5110, 6]
type = PlaySnd
trigger1 = Pos Y >= -15 && Vel Y > 0
value = F7, 0

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 5100

;----------------------------------------------------------------------------------------------
; Guard Crush State (see statedef -3 for coding details)
;----------------------------------------------------------------------------------------------

[Statedef 9000]
type    = S
physics = S
anim = 8000 ; Character being guard crushed
ctrl = 0

[State 9000, Freeze]
type = Pause
trigger1 = Time = 0
time = 3
movetime = 3
ignorehitpause = 1

[State 9000, Flash]
type = Envcolor
trigger1 = Time = 2
value = 248,248,248
time = 3
under = 1
ignorehitpause = 1

[State 9000, Screen Shake]
type = EnvShake
trigger1 = Time = 5
time = 15
amp = -3

[State 9000, Guard Crush Explod if P1] ; "Guard Crush !" sprite
type = null
triggerall = numexplod(7250) <= 0 && teamside = 1
trigger1 = time = 0
anim = 7250
id   = 7250
pos = 0,110
postype = left
bindtime = -1
sprpriority = 2
supermove = 1
facing = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, Guard Crush Explod if P2]
type = null
triggerall = numexplod(7251) <= 0 && teamside = 2
trigger1 = time = 0
anim = 7251
id   = 7251
pos = -97,110
postype = right
bindtime = -1
sprpriority = 2
supermove = 1
facing = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, Guard Crush Var Reset]
type = VarSet
trigger1 = time = 0
var(11) = 0
ignorehitpause = 1

[State 9000, Get back]
type = Velset
trigger1 = time = [3,10]
x = -5
ignorehitpause = 1

[State 9000, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;==============================================================================;
;Helpers                                                                       ;
;==============================================================================;
;---------------------------[SYSTEM HELPERS]------------------------------------
;------------------[MOVEHIT TICK-WISE DETECTOR FOR HITSOUNDS]-------------------
; WE SUNK
[Statedef 247]
anim = 1

[State -2, VarSet]
type = VarAdd
trigger1 = root,movehit = 1
var(1) = 1

[State -2, VarSet]
type = VarSet
trigger1 = root,movehit = 2
trigger2 = root,hitpausetime = 0
var(1) = 0

[State -2, VarSet]
type = VarSet
trigger1 = 1;root,movecontact = 1 && var(2) = 0
var(2) = root,movecontact

[State -2, DTC]
type = DisplayToClipboard
trigger1 = NumHelper(247)
text = "MoveHit = %d MoveContact = %d"
params = Var(1), var(2)


; (Credit to ANMC, Bagaliao, and FlowaGirl for the basic helper method concept.)
;
;------------------
; AI Activation Helper State - Primary Version
; (Credit to YongMing for the basic HitPause bugfix concept.)
;
; var(1) - First tick button activation prevention.
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Persistent direction command detection enabler (due to 2002.04.14).
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(58) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9741]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9741, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 5050

[State 9741, UglyHack]
type = VarSet
trigger1 = !var(1)
var(2) = 2

[State 9741, PauseCheck]
type = VarSet
trigger1 = GameTime > Parent,var(29)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2
trigger4 = Parent,var(30)
trigger5 = var(3):=0
var(2) = (var(3):=1)+(var(4):=0)

[State 9741, Facing]
type = Turn
trigger1 = var(9):=(Facing != Parent,Facing)
trigger1 = !(var(4):=0)

[State 9741, DirTurnOnAI]
type = ParentVarSet
triggerall = !(var(3) || var(9))
trigger1 = Parent,command = "holdfwd"
trigger2 = Parent,command = "holdback"
trigger3 = Parent,command = "holdup"
trigger4 = Parent,command = "holddown"
trigger5 = !(var(4):=1)
var(30) = var(4)

[State 9741, DirTurnOffAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = Parent,var(30)
trigger1 = command = "holdfwd"
trigger1 = Parent,command = "holdfwd"
trigger2 = command = "holdback"
trigger2 = Parent,command = "holdback"
trigger3 = command = "holdup"
trigger3 = Parent,command = "holdup"
trigger4 = command = "holddown"
trigger4 = Parent,command = "holddown"
var(30) = var(4):=0

[State 9741, ButtonTurnOnAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
var(30) = 1

[State 9741, ButtonTurnOffAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = command = "a"
trigger1 = Parent,command = "a"
trigger2 = command = "b"
trigger2 = Parent,command = "b"
trigger3 = command = "c"
trigger3 = Parent,command = "c"
trigger4 = command = "x"
trigger4 = Parent,command = "x"
trigger5 = command = "y"
trigger5 = Parent,command = "y"
trigger6 = command = "z"
trigger6 = Parent,command = "z"
trigger7 = command = "start"
trigger7 = Parent,command = "start"
var(30) = -1

[State 9741, UnPauseCheck]
type = VarSet
triggerall = var(2)
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
trigger8 = var(2) = 2
trigger8 = var(2):=0
var(2) = 2

[State 9741, Goodbye]
type = DestroySelf
triggerall = var(1):=1
trigger1 = Parent,var(30)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2


;------------------
; AI Activation Helper State - Compatibly Partnered Version
;
; var(1) - First tick activation prevention
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Hitpause check.
; var(5) - No button on previous tick.
; var(6) - Any dir on this tick.
; var(7) - Any button on this tick.
; var(8) - Matching partner button detected.
; var(9) - AutoTurn bug fixer.
; var(10)- Buffered dir detection disabler.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(58) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9742]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9742, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 5050

[State 9742, UglyHack]
type = VarSet
trigger1 = !var(1)
var(2) = var(3):=2

[State 9742, PauseCheck]
type = VarSet
trigger1 = GameTime > Parent,var(29)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2
trigger4 = Parent,var(30)
trigger5 = var(1)
trigger5 = var(3):=0
var(2) = var(3):=1

[State 9742, Facing]
type = Turn
trigger1 = var(9):=(Facing != Parent,Facing)

[State 9742, ParentDirCheck]
type = VarSet
trigger1 = Parent,command = "holdfwd"
trigger2 = Parent,command = "holdback"
trigger3 = Parent,command = "holdup"
trigger4 = Parent,command = "holddown"
trigger5 = var(6):=0
var(6) = 1

[State 9742, BufferCheck]
type = VarSet
trigger1 = var(3) || var(4) || var(10)
var(10) = var(6)

[State 9742, ParentButtonCheck]
type = VarSet
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
trigger8 = var(7):=0
var(7) = 1

[State 9742, SameButtonCheck]
type = VarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = NumPartner
trigger1 = Parent,command = "a"
trigger1 = Partner,command = "a"
trigger2 = Parent,command = "b"
trigger2 = Partner,command = "b"
trigger3 = Parent,command = "c"
trigger3 = Partner,command = "c"
trigger4 = Parent,command = "x"
trigger4 = Partner,command = "x"
trigger5 = Parent,command = "y"
trigger5 = Partner,command = "y"
trigger6 = Parent,command = "z"
trigger6 = Partner,command = "z"
trigger7 = Parent,command = "start"
trigger7 = Partner,command = "start"
trigger8 = var(8):=0
var(8) = 1

[State 9742, DirTurnOnAI]
type = ParentVarSet
trigger1 = var(6)
trigger1 = !(var(9) || var(10))
var(30) = 1

[State 9742, DirTurnOffAI]
type = ParentVarSet
triggerall = var(6)
triggerall = !var(3)
triggerall = Parent,var(30)
trigger1 = command = "holdfwd"
trigger1 = Parent,command = "holdfwd"
trigger2 = command = "holdback"
trigger2 = Parent,command = "holdback"
trigger3 = command = "holdup"
trigger3 = Parent,command = "holdup"
trigger4 = command = "holddown"
trigger4 = Parent,command = "holddown"
var(30) = 0

[State 9742, ButtonTurnOnAI]
type = ParentVarSet
trigger1 = var(5) && var(7)
trigger1 = !(var(2) || var(8))
var(30) = 1

[State 9742, ButtonTurnOffAI]
type = ParentVarSet
triggerall = var(7)
triggerall = !(var(2) || var(8))
trigger1 = command = "a"
trigger1 = Parent,command = "a"
trigger2 = command = "b"
trigger2 = Parent,command = "b"
trigger3 = command = "c"
trigger3 = Parent,command = "c"
trigger4 = command = "x"
trigger4 = Parent,command = "x"
trigger5 = command = "y"
trigger5 = Parent,command = "y"
trigger6 = command = "z"
trigger6 = Parent,command = "z"
trigger7 = command = "start"
trigger7 = Parent,command = "start"
var(30) = -1

[State 9742, UnPauseCheck]
type = VarSet
triggerall = var(2)
triggerall = !var(4)
trigger1 = var(7)
trigger2 = var(2) = 2
trigger2 = var(2):=0
var(2) = 2

[State 9742, Goodbye]
type = DestroySelf
trigger1 = Parent,var(30)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2

[State 9742, HitPauseCheck]
type = VarSet
trigger1 = var(6) || var(7)
trigger2 = !(Parent,HitPauseTime)
var(4) = Parent,HitPauseTime

[State 9742, Delay]
type = VarSet
trigger1 = var(1):=1
var(5) = !var(7)
;---------------------------[EXPLOSION SYSTEM FOR FIRE USERS]-------------------
;--------------------------------------[CRIMSON]--------------------------------
;Double Expl
[Statedef 12500]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5

[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 2
anim = 12505
pos = (-4-var(0)),-35
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 3
anim = 12505
pos = (-40-var(0)),-120
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 4
anim = 12505
pos = (-17-var(0)),-98
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 5
anim = 12505
pos = (-25-var(0)),-48
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 6
anim = 12505
pos = (-45-var(0)),-114
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 8
anim = 12505
pos = (-15-var(0)),-110
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 6

;Normal Expl
[Statedef 12501]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5

[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 2
anim = 12506
pos = (-4-var(0)),-35
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 3
anim = 12506
pos = (-40-var(0)),-120
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 4
anim = 12506
pos = (-17-var(0)),-98
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 5
anim = 12506
pos = (-25-var(0)),-48
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 6
anim = 12506
pos = (-45-var(0)),-114
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 8
anim = 12506
pos = (-15-var(0)),-110
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 20

;Pyro Expl
[Statedef 12502]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5

[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 2
anim = 12507
pos = (-41-var(0)),-53
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 3
anim = 12507
pos = (-30-var(0)),-46
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 4
anim = 12507
pos = (26-var(0)),-15
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 5
anim = 12507
pos = (10-var(0)),-94
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 6
anim = 12507
pos = (-19-var(0)),-63
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 8
anim = 12507
pos = (1-var(0)),-59
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 20

;Multi Small Expl
[Statedef 12503]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5
[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 1
range = 20

[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 2
anim = 12508
pos = (-41-var(0)),(-53+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 3
anim = 12508
pos = (-30-var(0)),(-46+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 4
anim = 12508
pos = (26-var(0)),(-15-var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 5
anim = 12508
pos = (10-var(0)),(-94+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 6
anim = 12508
pos = (-19-var(0)),(-63+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 8
anim = 12508
pos = (1-var(0)),(-59+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 20

;Small Expl
[Statedef 12504]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5
[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 1
range = 20

[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 2
trigger2 = time = 16
trigger3 = time = 40
anim = 12509
pos = (-41-var(0)),(-53+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 4
trigger2 = time = 20
trigger3 = time = 44
anim = 12509
pos = (-30-var(0)),(-46+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 6
trigger2 = time = 24
trigger3 = time = 48
anim = 12509
pos = (26-var(0)),(-15-var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 8
trigger2 = time = 28
trigger3 = time = 52
anim = 12509
pos = (10-var(0)),(-94+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 10
trigger2 = time = 32
trigger3 = time = 56
anim = 12509
pos = (-19-var(0)),(-63+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 12
trigger2 = time = 36
trigger3 = time = 60
anim = 12509
pos = (1-var(0)),(-59+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 62

;---------------------------[DREAMCANCEL MARQUEE]-------------------------------
[Statedef 40000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 16003
sprpriority = -1

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Explod] ;Black
type = Explod
trigger1 = !time
anim = 16002
ID = 16002
pos = 0,75
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 775
bindtime = 68
ignorehitpause = 1
ontop = 1
persistent = 0
trans = addalpha
alpha = 128,128

[State 1000, Explod] ;DREAMCANCEL
type = Explod
trigger1 = !time
anim = 16000
ID = 16000
pos = 0,75;160     ;118 in KOFXI ...
facing = 1
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 776
ignorehitpause = 1
persistent = 0
bindtime = 68
ontop = 1
ownpal = 1
removeongethit = 0

[State 1000, Explod] ;Marquee
type = Explod
trigger1 = !time
anim = 16001
ID = 16001
pos = 0,75
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 777
bindtime = 68
ontop = 1
ignorehitpause = 1
persistent = 0

[State 65000: DestroySelf]
type = DestroySelf
trigger1 = time = 68

;----------------------------[2002 UM MAX2 BG]----------------------------------
[Statedef 40001]
anim = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15600)
trigger1 = !time
anim = 15600
ID = 15600
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 10
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1
persistent = 0

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15601) < 2
trigger1 = !time
trigger2 = (time%10) = 0
anim = 15600
ID = 15601
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15610)
trigger1 = !time
anim = 15601
ID = 15610
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15611) < 2
trigger1 = !time
trigger2 = (time%20) = 0
anim = 15601
ID = 15611
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15620)
trigger1 = !time
anim = 15602
ID = 15620
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15621) < 2
trigger1 = !time
trigger2 = (time%40) = 0
anim = 15602
ID = 15621
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15630)
trigger1 = !time
anim = 15603
ID = 15630
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15631) < 2
trigger1 = !time
trigger2 = (time%80) = 0
anim = 15603
ID = 15631
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 160
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Glass Break]
type = ChangeState
trigger1 = root, stateno = 3200 && root, animelem = 12
trigger2 = root, stateno = 3202 && root, animelem = 24
trigger3 = root, stateno = 4000 && root, animelem = 34
trigger4 = root, movetype = H
value = stateno+1

[Statedef 40002]
anim = 1

[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15600
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15601
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15610
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15611
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15620
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15621
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15630
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15631

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S14001,0
volume = 200

[State 40001, Glass Break]
type = Explod
triggerall = !numexplod(15640)
trigger1 = !time
anim = 15604
ID = 15640
pos = 0,0
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
scale = 1,1
sprpriority = -20
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;--------------------------[2002 UM MAX2 PORTRAIT]------------------------------
[Statedef 40003]
anim = 1

[State 40003, VarSet]
type = VarSet
triggerall = enemy, numhelper(40003)
triggerall = !enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "David Demianoff"
trigger6 = enemy, authorname = "Dark Saviour"
trigger7 = enemy, authorname = "Kung Fu Man"
trigger8 = enemy, authorname = "KoopaKoot"
trigger9 = enemy, authorname = "Anjel"
trigger10 = enemy, authorname = "David Demianoff & Kung Fu Man"
var(0) = 1

[State 40003, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "David Demianoff"
trigger6 = enemy, authorname = "Dark Saviour"
trigger7 = enemy, authorname = "Kung Fu Man"
trigger8 = enemy, authorname = "KoopaKoot"
trigger9 = enemy, authorname = "Anjel"
trigger10 = enemy, authorname = "David Demianoff & Kung Fu Man"
var(0) = 1

[State 40001, P1 BG]
type = Explod
triggerall = !numexplod(15650)
triggerall = teamside = 1
trigger1 = !time
anim = 15605
ID = 15650
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40001, P2 BG]
type = Explod
triggerall = !numexplod(15651)
triggerall = teamside = 2
trigger1 = !time
anim = 15606
ID = 15651
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40001, P1 PORTRAIT]
type = Explod
triggerall = !numexplod(15660)
triggerall = teamside = 1
trigger1 = !time
anim = 15607
ID = 15660
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -18
ownpal = 1
ignorehitpause = 1

[State 40001, P2 PORTRAIT]
type = Explod
triggerall = !numexplod(15661)
triggerall = teamside = 2
trigger1 = !time
anim = 15607
ID = 15661
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -18
ownpal = 1
ignorehitpause = 1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15650
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15650
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15651
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15651
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15660
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15660
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15661
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15661
scale = 1,1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 60

[Statedef 40004]
anim = 1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;---------------------------[KOF K.O. SYSTEM]-----------------------------------
;This is as accurate as it'll get with MUGEN's K.O. slow system.
[Statedef 50000]
ctrl = 0
anim = 1
ownpal = 1

[State 50000, VarSet]
type = VarSet
trigger1 = root, stateno = [200,991]
var(0) = 1

[State 50000, PlaySnd]
type = PlaySnd
trigger1 = IsHelper(50000) && !time
value = 3,18
volume = 255
channel = 1
ignorehitpause = 1

[State 50000, PlaySnd]
type = PlaySnd
trigger1 = IsHelper(50001) && !time
value = 3,19
volume = 255
channel = 1
ignorehitpause = 1

[State 3000, AssertSpecial]
type = AssertSpecial
triggerall = !var(0)
trigger1 = time = [0,17]
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = !time
value = 0,0,0
time = 0;6
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 1
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 2
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 3
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 4
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 5
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 7
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 9
value = 255,0,0
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 11
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 13
value = 255,0,0
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor];Must last two ticks!
type = EnvColor
trigger1 = time = 15
value = 0,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor];One tick.
type = EnvColor
trigger1 = time = 16
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor];One tick.
type = EnvColor
triggerall = !var(0)
trigger1 = time = 17
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

;---------------------------[SKILLBAR SYSTEM]-----------------------------------
[Statedef 70000]
ctrl = 0
anim = 1
ownpal = 1

[State 60000, Explod]
type = Explod
trigger1 = !NumExplod(14006)
trigger1 = TeamSide = 1
anim = 14009
ID = 14006
postype = Back
pos = 23,225+(root,var(25))
ownpal = 1
bindtime = -1
scale = 0.5,0.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
trigger1 = !NumExplod(14006)
trigger1 = TeamSide = 2
anim = 14010
ID = 14006
postype = Back
pos = 23,225+(root,var(25))
ownpal = 1
bindtime = -1
scale = 0.5,0.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) < 1000
trigger1 = !NumExplod(14000)
trigger1 = TeamSide = 1
anim = 14000
ID = 14000
postype = Back
pos = 37,229+(root,var(25))
ownpal = 1
bindtime = -1
scale = 1,0.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) < 1000
trigger1 = !NumExplod(14000)
trigger1 = TeamSide = 2
anim = 14000
ID = 14000
postype = Back
pos = 38,229+(root,var(25))
ownpal = 1
bindtime = -1
scale = 1,0.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) > 1000
trigger1 = !NumExplod(14007)
trigger1 = TeamSide = 1
anim = 14000
ID = 14007
postype = Back
pos = 37,229+(root,var(25))
ownpal = 1
bindtime = -1
scale = 1,.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) > 1000
trigger1 = !NumExplod(14007)
trigger1 = TeamSide = 2
anim = 14000
ID = 14007
postype = Back
pos = 38,229+(root,var(25))
ownpal = 1
bindtime = -1
scale = 1,.5
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) > 1000
trigger1 = !NumExplod(14001)
trigger1 = TeamSide = 1
anim = 14001
ID = 14001
postype = Back
pos = 37,229+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) > 1000
trigger1 = !NumExplod(14001)
trigger1 = TeamSide = 2
anim = 14001
ID = 14001
postype = Back
pos = 37,229+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod];Stock Numbah One
type = Explod
trigger1 = parent,fvar(5) > 1000
trigger1 = !NumExplod(14003)
trigger1 = TeamSide = 1
anim = 14003
ID = 14003
postype = Back
pos = 31,228+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 60000, Explod]
type = Explod
trigger1 = parent,fvar(5) > 1000
trigger1 = !NumExplod(14003)
trigger1 = TeamSide = 2
anim = 14006
ID = 14003
postype = Back
pos = 31,228+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 60000, Explod];Stock Numbah One Silver
type = Explod
trigger1 = parent,fvar(5) > 1999
trigger1 = !NumExplod(14005)
trigger1 = TeamSide = 1
anim = 14005
ID = 14005
postype = Back
pos = 31,228+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 60000, Explod]
type = Explod
trigger1 = parent,fvar(5) > 1999
trigger1 = !NumExplod(14005)
trigger1 = TeamSide = 2
anim = 14007
ID = 14005
postype = Back
pos = 31,228+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = parent,fvar(5) < 1001
trigger1 = NumExplod(14000)
ID = 14000
scale = (parent,fvar(5))/1000.0,.5
ignorehitpause = 1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) > 1999
trigger1 = !NumExplod(14002)
trigger1 = TeamSide = 1
anim = 14002
ID = 14002
postype = Back
pos = 37,229+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 60000, Explod]
type = Explod
triggerall = parent,fvar(5) > 1999
trigger1 = !NumExplod(14002)
trigger1 = TeamSide = 2
anim = 14002
ID = 14002
postype = Back
pos = 38,229+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = parent,fvar(5) > 1000
trigger1 = NumExplod(14001)
ID = 14001
scale = ((parent,fvar(5)-1000)/1000.0),.5
ignorehitpause = 1

[State 6140, ModifyExplod]
type = ModifyExplod
triggerall = parent,fvar(5) > 1999
trigger1 = NumExplod(14002)
ID = 14002
scale = (parent,fvar(5)-1000)/1000.0,.5
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = parent,fvar(5) > 1000
trigger1 = NumExplod(14000)
ID = 14000
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = NumExplod(14001)
trigger1 = parent,fvar(5) > 1999
trigger2 = parent,fvar(5) < 999
ID = 14001
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = parent,fvar(5) < 1999
trigger1 = NumExplod(14002)
ID = 14002
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = NumExplod(14003)
trigger1 = parent,fvar(5) > 1999
trigger2 = parent,fvar(5) < 999
ID = 14003
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = parent,fvar(5) < 1999
trigger1 = NumExplod(14004)
ID = 14004
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = parent,fvar(5) < 1999
trigger1 = NumExplod(14005)
ID = 14005
ignorehitpause = 1

[State 6140, ModifyExplod]
type = RemoveExplod
triggerall = NumExplod(14007)
trigger1 = parent,fvar(5) > 1999
trigger2 = parent,fvar(5) < 999
ID = 14007
ignorehitpause = 1

[State 60000, Explod];Stock Numbah Two
type = Explod
trigger1 = parent,fvar(5) > 1999
trigger1 = !NumExplod(14004)
trigger1 = TeamSide = 1
anim = 14004
ID = 14004
postype = Back
pos = 24,228+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 60000, Explod]
type = Explod
trigger1 = parent,fvar(5) > 1999
trigger1 = !NumExplod(14004)
trigger1 = TeamSide = 2
anim = 14005
ID = 14004
postype = Back
pos = 25,228+(root,var(25))
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 132121321, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Gauge 2 = %d Gauge 1 = %d"
params = numexplod(14001), numexplod(14000)
;ignorehitpause =
;persistent =

;Skill Bar Snd
[Statedef 70001]
ctrl = 0
anim = 1
ownpal = 1

[State 60000, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,14
volume = 256
persistent = 0
channel = 23
ignorehitpause = 1

[State 60000, StopSnd]
type = StopSnd
trigger1 = Roundstate < 2
channel = 23

[State 70001, DestroySelf]
type = DestroySelf
trigger1 = Parent, fvar(5) = [1002,1998]
trigger2 = Parent, fvar(5) = [0,1001]
trigger3 = Parent, fvar(5) = 2000

;---------------------------[2002 UM MAX MODE]----------------------------------
[Statedef 70005]
ctrl = 0
anim = 1

[State 70001, PowerAdd]
type = PowerAdd
trigger1 = !time
value = -1000

[State 70001, VarSet]
type = VarSet
trigger1 = !time
var(0) = power

[State 70001, PowerSet]
type = PowerSet
trigger1 = root,stateno != [3000,4000]
value = var(0)

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S14100,0
volume = 200

[State 70001, ParentVarSet]
type = ParentVarSet
trigger1 = !time
var(51) = 753

[State 70001, MAX2 INDICATOR]
type = PalFX
trigger1 = root, life <= 300
time = 1
add = ceil(37/6*sin(2*pi*(root,var(51))/2)),ceil(-170/2*sin(2*pi*(root,var(51))/2)),ceil(-200*2*sin(2*pi*(root,var(51))/2))
mul = 256,128,128
invertall = 1
color = 256
ignorehitpause = 1

[State 60000, P1 MAX-ON !!]
type = Explod
trigger1 = !NumExplod(14110)
trigger1 = TeamSide = 1
anim = 14110
ID = 14110
postype = left
pos = 33,223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 60000, P2 MAX-ON !!]
type = Explod
trigger1 = !NumExplod(14110)
trigger1 = TeamSide = 2
anim = 14110
ID = 14110
postype = right
pos = -(68+33),223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = !time
trigger2 = time = 26
ID = 14110
scale = 1,0.14
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 1
trigger2 = time = 25
ID = 14110
scale = 1,0.29
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
trigger2 = time = 24
ID = 14110
scale = 1,0.43
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 3
trigger2 = time = 23
ID = 14110
scale = 1,0.57
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
trigger2 = time = 22
ID = 14110
scale = 1,0.71
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 5
trigger2 = time = 21
ID = 14110
scale = 1,0.86
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 14110
scale = 1,1

[State 60000, P1 HOLD]
type = Explod
trigger1 = !NumExplod(14100)
trigger1 = TeamSide = 1
trigger1 = time = 27
anim = 14100
ID = 14100
postype = left
pos = 33,223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 60000, P2 HOLD]
type = Explod
trigger1 = !NumExplod(14100)
trigger1 = TeamSide = 2
trigger1 = time = 27
anim = 14101
ID = 14100
postype = right
pos = -(72+33),223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 27
ID = 14100
scale = 1,0.14
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 28
ID = 14100
scale = 1,0.29
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 29
ID = 14100
scale = 1,0.43
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 30
ID = 14100
scale = 1,0.57
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 31
ID = 14100
scale = 1,0.71
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 32
ID = 14100
scale = 1,0.86
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 33
ID = 14100
scale = 1,1

[State 70001, P1 METER]
type = Explod
trigger1 = !NumExplod(14120)
trigger1 = TeamSide = 1
trigger1 = time = 27
anim = 14120
ID = 14120
postype = left
pos = 56,222
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 70001, P2 METER]
type = Explod
trigger1 = !NumExplod(14120)
trigger1 = TeamSide = 2
trigger1 = time = 27
anim = 14120
ID = 14120
postype = right
pos = -56,222
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
facing = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 70001, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(14120)
ID = 14120
scale = (root,var(51)/752.0)*0.96,1

;7 scale changes. Seventh change is a reset.
;Total time is 16 ticks*47 points, 752 ticks. Varadd should be 1 point
; every 16th tick
;Or... converted to MUGEN tick-wise system...
;Every MAX cancel should take 128 total points out of 752.
[State 40001, DestroySelf]
type = ChangeState
trigger1 = root,var(51) <= 0;time = 752
value = stateno+1

[Statedef 70007]
ctrl = 0
anim = 1

[State 70001, PowerAdd]
type = PowerAdd
trigger1 = !time
value = -3000

[State 70001, VarSet]
type = VarSet
trigger1 = !time
var(0) = power

[State 70001, PowerSet]
type = PowerSet
trigger1 = root,stateno != [3000,3999]
value = var(0)

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S14100,0
volume = 200

[State 70001, ParentVarSet]
type = ParentVarSet
trigger1 = !time
var(53) = 753

[State 70001, MAX2 INDICATOR]
type = PalFX
trigger1 = root, life <= 300
time = 1
add = ceil(37/6*sin(2*pi*(root,var(53))/2)),ceil(-170/2*sin(2*pi*(root,var(53))/2)),ceil(-200*2*sin(2*pi*(root,var(53))/2))
mul = 256,128,128
invertall = 1
color = 256
ignorehitpause = 1

[State 60000, P1 MAX-ON !!]
type = Explod
trigger1 = !NumExplod(14110)
trigger1 = TeamSide = 1
anim = 14110
ID = 14110
postype = left
pos = 33,223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 60000, P2 MAX-ON !!]
type = Explod
trigger1 = !NumExplod(14110)
trigger1 = TeamSide = 2
anim = 14110
ID = 14110
postype = right
pos = -(68+33),223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = !time
trigger2 = time = 26
ID = 14110
scale = 1,0.14
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 1
trigger2 = time = 25
ID = 14110
scale = 1,0.29
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
trigger2 = time = 24
ID = 14110
scale = 1,0.43
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 3
trigger2 = time = 23
ID = 14110
scale = 1,0.57
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
trigger2 = time = 22
ID = 14110
scale = 1,0.71
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 5
trigger2 = time = 21
ID = 14110
scale = 1,0.86
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 14110
scale = 1,1

[State 60000, P1 HOLD]
type = Explod
trigger1 = !NumExplod(14100)
trigger1 = TeamSide = 1
trigger1 = time = 27
anim = 14100
ID = 14100
postype = left
pos = 33,223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 60000, P2 HOLD]
type = Explod
trigger1 = !NumExplod(14100)
trigger1 = TeamSide = 2
trigger1 = time = 27
anim = 14101
ID = 14100
postype = right
pos = -(72+33),223
ownpal = 1
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 27
ID = 14100
scale = 1,0.14
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 28
ID = 14100
scale = 1,0.29
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 29
ID = 14100
scale = 1,0.43
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 30
ID = 14100
scale = 1,0.57
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 31
ID = 14100
scale = 1,0.71
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 32
ID = 14100
scale = 1,0.86
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 33
ID = 14100
scale = 1,1

[State 70001, P1 METER]
type = Explod
trigger1 = !NumExplod(14120)
trigger1 = TeamSide = 1
trigger1 = time = 27
anim = 14120
ID = 14120
postype = left
pos = 56,222
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 70001, P2 METER]
type = Explod
trigger1 = !NumExplod(14120)
trigger1 = TeamSide = 2
trigger1 = time = 27
anim = 14120
ID = 14120
postype = right
pos = -56,222
bindtime = -1
scale = 1,1
ignorehitpause = 1
ontop = 1
removetime = -1
facing = -1
pausemovetime = -1
supermovetime = -1
persistent = 0
[State 70001, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(14120)
ID = 14120
scale = (root,var(53)/752.0)*0.96,1

[State 40001, DestroySelf]
type = ChangeState
trigger1 = root,var(53) <= 0;time = 752
value = stateno-1

[Statedef 70006]
ctrl = 0
anim = 1
ownpal = 1

[State 70002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 14100
[State 70002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 14101
[State 70002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 14110
[State 70002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 14120

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = !time


[Statedef 3300];Ok!
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 5
anim = 3300

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 6001, pause]
type = SuperPause
trigger1 = !var(53) && time = 0
time = 28
movetime = 7
anim = -1
darken = 0
poweradd = -1000-((prevstateno = [1000,2999])-(var(51) > 0))*1000

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,2999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 51
value = 0

[State 4000]
type = EnvColor
trigger1 = !var(53) && time = 1
value = 0, 0, 0
time = 29
under = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 5,10

[State 6001, pause]
type = Explod
trigger1 = !var(53) && time = 1
anim = 15200-(var(31)*200)
pos = -25,-100
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15201-(var(31)*200)
pos = -25,-100
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
sprpriority = 4
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(4) = 1
trigger2 = animelemtime(15) = 1
anim = 1202
ID = 1202
pos = -6,13
postype = p1
bindtime = 17
removetime = 17
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelemtime(6) = 1
trigger2 = animelemtime(17) = 1
anim = 1203
ID = 1203
pos = 20,5
postype = p1
bindtime = 22
removetime = 22
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelemtime(25) = 1
anim = 1211
ID = 1211
pos = 0,0
postype = p1
bindtime = 12
removetime = 12
scale = 1,1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 15
trigger3 = animelem = 24
value = 1200,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 13
value = 1200,0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 28
movetype = I

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
trigger2 = animelem = 18
x = 26

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 2

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 18, > 0
x = 5.5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 18
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 18
y = -8

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(18) > 0
y = 0.42

[State 0, Width]
type = Width
trigger1 = 1
player = 10,10
edge = 10,10

[State 0, EnvColor]
type = EnvColor
triggerall = movehit
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 16
trigger5 = animelem = 17
trigger6 = animelem = 18
trigger7 = animelem = 19
trigger8 = animelem = 20
trigger9 = animelem = 27
value = 255,255,255
time = 2
under = 1
ignorehitpause =1
persistent =1

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 16
trigger5 = animelem = 17
trigger6 = animelem = 18
attr = S, HA
damage = 20, 5
animtype = Hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 3,16
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -30
hitsound = s5,3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1
guard.velocity = -12
guard.pausetime = 0,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = High
air.velocity = 0, -5
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
getpower = 0
givepower = 31, 31
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .45
palfx.time = 35
Palfx.add = 40,-70,-200
Palfx.sinadd = 40,30,0,10
Palfx.color = 0
palfx.invertall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 19
trigger2 = animelem = 20
attr = A, HA
damage = 30, 10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 3,4
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -17
hitsound = s5,3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-10
guard.velocity = -12
guard.pausetime = 0,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = High
air.velocity = -2,-7
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
getpower = 0
givepower = 31, 31
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
palfx.time = 35
Palfx.add = 40,-70,-200
Palfx.sinadd = 40,30,0,10
Palfx.color = 0
palfx.invertall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 27
attr = A, HA
damage = 50, 10
animtype = Medium
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 31,32
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -17
hitsound = s5,7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,7
guard.velocity = -9
guard.pausetime = 9,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = Low
air.velocity = -4,12
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
getpower = 0
givepower = 31, 31
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
palfx.time = 30
Palfx.add = 40,-70,-200
Palfx.sinadd = 40,30,0,10
Palfx.color = 0
palfx.invertall = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1206
ctrl = 0


[Statedef 3400];Ok!
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0
sprpriority = 2
anim = 3400

[State 3106, o]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3050, BGPalfx]
type = BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5)=0
id = 3005
anim = 3005
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
removetime = 250
ownpal = 1
removeongethit = 1
bindtime = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 9
id = 3005

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5)=0
id = 3008
anim = 3008
pos = 0,0
sprpriority = -2
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 11
value = 4,9
volume = 200

[State 0, Explod]
type = Explod
trigger1 = animelemtime(9)=0
id = 3006
anim = 3006
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
removeongethit = 0
bindtime = 1

[State 810, 1]
type = AfterImage
trigger1 = animelem = 11
time = 44
length = 5
framegap = 1
palcontrast = 256,256,256
paladd = 0,0,40
palmul = 1,1,1
trans = add1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(11)>=0 && animelemtime(15)<0
value = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(15)>=0
value = 1

[State 13000, EnvColor]
type = EnvColor
trigger1 = movehit = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 11
x = 8

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(15)>0
x = 0.9

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelem = 13
attr = S, HA
damage = 50,10
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
sparkno = S27003
sparkxy = -30, -70
hitsound = s12,6
guardsound = s3+(var(32)*2), 13
guard.sparkno = s27502
ground.type = High
pausetime = 1,1
guard.pausetime = 1,1
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0, -10
guard.velocity = -11.1796875
air.type = High
air.velocity = 0, -10
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 0,0
id = 3000
fall = 1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 50
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
yaccel = 0.4
p2stateno = 3009

[State 3005, ContactSpark]
type = Explod
trigger1 = MoveHit = 1
anim = 12505
pos = 0,-50
postype = p2
bindtime = -1
sprpriority = 4
ownpal = 1

[State 1000, 6]
type = velset
trigger1 = animelem = 19
X = 0

[State 1000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


[Statedef 4000];Ok!
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0
sprpriority = 2
juggle = 5
anim = 3600

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 3
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40003)
trigger1 = time = 25
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40004)
trigger1 = time = 25
helpertype = normal
name = "Player 1"
ID = 40004
stateno = 40004
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 6001, pause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
sound = s3,15
p2defmul = 1
poweradd = -3000-((prevstateno = [1000,2999])-(var(51) > 0))*1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 51
value = 0

[State 6001, pause]
type = Explod
trigger1 = animelemtime(2)=1
anim = 15500
pos = -25,-75
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = animelemtime(2)=1
anim = 15501
pos = -25,-75
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1202
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1203

[State 4300, ]
type = Explod
trigger1 = AnimElem = 6
anim = 3610
ID = 4300
pos = 10,15
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = 20
supermovetime = 9999
sprpriority = 5
removeongethit = 1
supermove = 1
pausemove = 1

[State 4300, ]
type = Explod
trigger1 = AnimElem = 11
anim = 7061
ID = 10050
postype = P1
pos = 10,0
persistent = 0
sprpriority = -1
bindtime = -1
removetime = 90
ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1

[State 4300, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = Normal
name = "Chain Drive"
ID = 4300
stateno = 4100
pos = 2,-6
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 4300, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 4100]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3620
ctrl     = 0
sprpriority = 9

[State 4300, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4300, PlaySnd]
type = PlaySnd
trigger1 = Time = 10
value = s8,0

[State 4300, Q]
type = PlaySnd
trigger1 = Time = 10
value = s3,19

[State 4300, EnvShake]
type = EnvShake
trigger1 = animelem = 9
time = 45
freq = 100
ampl = -6

[State 4300, HitDef]
type = HitDef
trigger1 = gametime%5 = 0
attr = S, HP
damage = 25,3
getpower = 0,0
givepower = 0,0
animtype = Up
guardflag = M
hitflag = MAF
sprpriority = 9
priority = 7, Hit
pausetime = 0,6
guard.pausetime = 0,12
sparkno = s17002+(var(31)*10000)
guard.sparkno = s17502+(var(31)*10000)
sparkxy = -20,-75+(floor(p2bodydist Y))
hitsound = s4,1
guardsound = s3,13
ground.type = Hard
ground.slidetime = 20
ground.hittime   = 21
ground.velocity  = 0,-10
guard.velocity = -8
air.velocity = -1,-10
air.hittime = 12
air.fall = 1
fall.recover = 0
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 40
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = -10
envshake.freq = 45
envshake.phase = 45

[State 4300, DestroySelf]
type = ChangeState
trigger1 = Time > 105
value = 4110

[Statedef 4110]
type = S
ctrl = 0
anim = 3630
velset = 0,0
sprpriority = 8

[State 4300, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AngleDraw
trigger1 = animelem = 7, > 0
value = 90
scale = 0.8,0.8

[State a]
type = posadd
trigger1 = animelem = 7
X = -20
Y = -100

[State 4300, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200,256

[State 4300, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0


[statedef 999999]
anim = 1
ctrl=0

;helper for command check

[State esp]
Type = null
Trigger1 = 0



[Statedef 1800]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1800

[State x]
type = PlaySnd
trigger1 = AnimElem = 4
value = S10,9

[State x]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1900]
type = A
movetype = A
physics = N
anim = 1900
velset = 0,0
ctrl = 0
sprpriority = 2

[State x]
type = poweradd
trigger1 = root,stateno != 1800
trigger1 = Time = 0
value = -1000

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 1
value = 2000,4
channel = 28

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
value = 5,6

[State 3005, width]
type = width
trigger1 = 1
edge = 10

[State 1105, y]
type = velset
trigger1 = 1
x = 3

[State 1105, y]
type = velset
trigger1 = time < 2
y = -4

[State 1105, y]
type = veladd
trigger1 = time > 1
y = .3

[State 1100, hitdef]
type = HitDef
trigger1 = AnimElem = 6
attr = A, SA
damage = 40,10
animtype = hard
hitflag = MAF
guardflag = MA
sparkno = s27002
guard.sparkno = s27502
sparkxy = -10,-60
hitsound = S5,7
guardsound = S5,13
pausetime = 10,10
ground.hittime = 17
ground.type = high
ground.slidetime = 17
ground.velocity = -2
air.velocity = -4,-8
fall = 0
yaccel = .5

[State 1100, hitdef]
type = HitDef
trigger1 = AnimElem = 14
attr = A, SA
damage = 50,10
animtype = hard
hitflag = MAF
guardflag = MA
sparkno = s27002
guard.sparkno = s27502
sparkxy = -10,-60
hitsound = S5,9
guardsound = S5,13
pausetime = 5,5
ground.hittime = 17
ground.type = high
ground.slidetime = 17
ground.velocity = -5,-8
air.velocity = -4,-8
fall = 1
yaccel = .5
palfx.time = 30
palfx.add = 30,30,60
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 1000, 1]
type = Playsnd
trigger1 = AnimElem = 13, > 0 && movehit = 1
value = 2000,3

[State -2, 0]
type = Helper
trigger1 = animelem = 13
helpertype = normal
pos = -20,-20
postype = p1
stateno = 1901

[State 1100, state]
type = Changestate
trigger1 = vel y >= 0 && pos y >= 0
value = ifelse(movehit,1910,1905)

[Statedef 1901]
type = A
ctrl = 0
anim = 1920
velset = 0,0
sprpriority = 3

[State 4300, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State a]
type = AngleDraw
trigger1 = 1
value = -45
scale = 0.6,0.6

[State 4300, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

[Statedef 1905]
type = S
movetype = A
physics = N
anim = 1905
velset = 0,0
ctrl = 0

[State 1110, pos]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 12,2

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2000,1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 2000,2

[State 3020, 3]
type = Projectile
trigger1 = AnimElem = 7
projID = 1930
projanim = 1930
projhitanim = 1930
projremovetime = 20
velocity = 4
projpriority = 1
postype = p1
offset = 0,0
attr = S, SP
damage = 60,10
animtype = hard
hitflag = MAFP
guardflag = MA
sparkno = -1
guard.sparkno = -1
sparkxy = 80,-50
hitsound = S2000,3
guardsound = S5,13
pausetime = 0,17
ground.hittime = 19
ground.type = high
ground.slidetime = 19
ground.velocity = -12
air.velocity = -4,-6
air.fall = 1
yaccel = .5
palfx.time = 41
palfx.add = 30,30,60
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State x]
type = StateTypeSet
trigger1 = AnimElem = 14
movetype = I

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 14

[State x]
type = VelSet
trigger1 = AnimElem >= 18
x = 5

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 18
value = 2000,0
channel = 28

[State 1100, state]
type = DestroySelf
trigger1 = FrontEdgeDist <= -30

[Statedef 1910]
type = S
movetype = I
physics = N
anim = 1910
velset = 0,0
ctrl = 0

[State 1110, pos]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 12,2

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 4

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 2000,0
channel = 28

[State x]
type = VelSet
trigger1 = AnimElem >= 8
x = 5

[State 1100, state]
type = DestroySelf
trigger1 = FrontEdgeDist <= -30

;---------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------

[Statedef -2]

;----------------
;Character specific variables


[State x]
type = Helper
triggerall = !NumHelper(1900)
triggerall = movetype != H
trigger1 = stateno = 1800 && Time = 1
trigger2 = !var(59)
trigger2 = stateno = [200,2000)
trigger2 = power >= 1000 && Command = "a" && Command = "y"
trigger3 = var(59) && random < 20
trigger3 = power >= 1000 && stateno = [200,2000)
trigger3 = p2statetype = S && p2stateno = [5000,6000)
helpertype = normal
name = "Kula"
ID = 1900
stateno = 1900
pos = -30,0
postype = back
keyctrl = 0
ownpal = 1
scale = 1,1
sprpriority = 1
ignorehitpause = 1


[State 3005, ContactSpark]
type = Explod
trigger1 = ProjHit1930 = 1
anim = 27002
ID = 27000
pos = 0,-50
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
shadow = 0,0,0
ownpal = 1
persistent = 0

[State 3005, ContactSpark]
type = Explod
trigger1 = ProjGuarded1930 = 1
anim = 27502
ID = 27000
pos = 0,-50
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
shadow = 0,0,0
ownpal = 1
persistent = 0

[State -3, Cybaster fix]
type = StopSnd
trigger1 = !NumHelper(1900)
channel = 28

;----------------
;Heat Drive Edge Detector
[State 0, VarAdd]
type = VarAdd
trigger1 = name = "K'"
trigger1 = var(40)>0
v = 40
value = -1

;Eins Trigger Custom limiters
[State 0, VarAdd]
type = VarAdd
trigger1 = name = "K'"
trigger1 = var(44)>0
v = 44
value = -1

[State 0, VarAdd]
type = VarAdd
trigger1 = name = "K'"
trigger1 = var(45)>0
v = 45
value = -1


;================================================================================
; ------- Front corner fix --------
;===============================================================================
;To prevent switching sides while making combos.
[State -2, Width]
type = Width
triggerall = numenemy
trigger1 = facing != enemynear, facing
trigger1 = movetype != H
edge = 8,0
ignorehitpause = 1

;================================================================================
; ------- Basic Move Auto Recover --------
;===============================================================================
[State -2, Aerial Hit]
type = VarSet
triggerall = P2MoveType = H && P2StateType = A
triggerall = MoveHit = 1
triggerall = stateno != 505
trigger1 = (StateNo = [200,710])
fvar(34) = 1
ignorehitpause = 1
[State -2, PowerReset]
type = VarSet
trigger1 = !NumTarget
trigger2 = P2MoveType != H
fvar(34) = 0
ignorehitpause = 1
[State 901, Throw]
type = TargetState
triggerall = NumTarget
triggerall = fVar(34)
trigger1 = target,StateNo = 5050
trigger1 = target,alive
value =  840

;================================================================================
; ------- DTC --------
;===============================================================================
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "power =%d X = %f = Y=%f Juggle =%d SC = %d" ;Shake=%d" ;K' = %d";Juggle Points = %d EX = %d"
params = var(35), Vel X, Vel Y, var(55), var(54)     ;(enemynear, hitshakeover);,var(8) ;var(55), var(10)

;================================================================================
; ------- Movehit Helper --------
;===============================================================================
[State -2, 0]
type = Helper
triggerall = !NumHelper(247)
trigger1 = !Time
helpertype = normal
name = "Movehit"
ID = 247
pos = 0,0
postype = p1
stateno = 247
keyctrl = 0

;P2 Safe Fall
[State -2, P2 Safe Fall]
type= targetstate
trigger1= numtarget=1; Just to prevent Simul mode shenanigans
trigger1= target,command="recovery"
trigger1= target,pos y>=-20 && target,vel y>0
trigger1= target,alive && target,hitfall && target,gethitvar(fall.recover)
trigger1= target,stateno=5030 || target,stateno=5035 || target,stateno=5050 || target,stateno=5071
value= 5205
ignorehitpause= 1

;================================================================================
; ------- Hitsounds and Explods --------
;===============================================================================
[State 3303, Explod]
type = Explod
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 1252 && P2MoveType = H
trigger2 = P2Stateno = 1255 && P2MoveType = H
anim = 12001+(var(31)*10000)
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 2
ownpal = 1
persistent = 0

[State 3303, Explod]
type = Explod
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 1252 && P2MoveType = H
trigger2 = P2Stateno = 1255 && P2MoveType = H
anim = 12002+(var(31)*10000)
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 10802 && P2MoveType = H
value = 12,11
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 10904 && P2MoveType = H
value = 12,9
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 1252 && P2MoveType = H
trigger2 = P2Stateno = 1255 && P2MoveType = H
value = 2+(var(32)*10),9
persistent = 0

[State -2, PlaySnd]
type = PlaySnd
trigger1 = numenemy
trigger1 = p2stateno = 10902 && p2movetype = h
trigger1 = enemynear, animelemtime(1) = 1
value = 5,8
volume = 200

;================================================================================
; ------- Slowmotion System By CCIronMugen & Scal --------
;===============================================================================
[State -2]
type = VarAdd
trigger1 = var(16) != 0
trigger1 = (gametime%2) = 0
var(16) = -1
ignorehitpause = 1

[State -2]
type = Pause
triggerall = (gametime%2) = 0
trigger1 = var(16) != 0
time = 1
movetime = 0
ignorehitpause = 1
;================================================================================
; ------- Explosion System --------
;===============================================================================
[State 1000: Helper]
type = Helper ;This is too much.
triggerall = numenemy
triggerall = enemynear, movetype = H
triggerall = numhelper(247)
triggerall = !NumHelper(12501)
trigger1 = numtarget(3116) && helper(247), var(1) = 1
trigger2 = stateno = 3202 && animelem = 15
helpertype = Normal
name = "Double Expl"
id = 12500
pos = 0, 0 ;50
postype = p2
facing = 1
stateno = 12500
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0
ignorehitpause = 1
[State 1000: Helper]
type = Helper
triggerall = numenemy
triggerall = enemynear, movetype = H
triggerall = numhelper(247)
triggerall = !NumHelper(12501)
trigger1 = numhelper(1001)
trigger1 = helper(1001), var(1) = 1
trigger2 = numhelper(1007)
trigger2 = helper(1007), var(1) = 1
trigger3 = numtarget(1010) && var(1) = 1
trigger4 = numhelper(1016)
trigger4 = helper(1016), var(1) = 1
trigger5 = numtarget(1030) && helper(247), var(1) = 1
trigger6 = numtarget(1200) && helper(247), var(1) = 1
trigger7 = numtarget(1201) && helper(247), var(1) = 1
trigger8 = numtarget(1202) && helper(247), var(1) = 1
trigger9 = numtarget(1210) && helper(247), var(1) = 1
trigger10 = stateno = 3004
trigger11 = numtarget(3116) && helper(247), var(1) = 1
trigger12 = stateno = 3202 && animelem = 15
helpertype = Normal
name = "Normal Expl"
id = 12501
pos = 0, 0 ;50
postype = p2
facing = 1
stateno = 12501
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0
ignorehitpause = 1
[State 1000: Helper]
type = Helper
triggerall = numenemy
triggerall = enemynear, movetype = H
triggerall = numhelper(247)
triggerall = !NumHelper(12502)
trigger1 = numhelper(1001)
trigger1 = helper(1001), var(1) = 1
trigger2 = numhelper(1007)
trigger2 = helper(1007), var(1) = 1
trigger3 = numtarget(1010) && var(1) = 1
trigger4 = numhelper(1016)
trigger4 = helper(1016), var(1) = 1
trigger5 = numtarget(1030) && helper(247), var(1) = 1
trigger6 = numtarget(1200) && helper(247), var(1) = 1
trigger7 = numtarget(1201) && helper(247), var(1) = 1
trigger8 = numtarget(1202) && helper(247), var(1) = 1
trigger9 = numtarget(1210) && helper(247), var(1) = 1
trigger10 = stateno = 3004
trigger11 = numtarget(3116) && helper(247), var(1) = 1
trigger12 = stateno = 3202 && animelem = 15
helpertype = Normal
name = "Pyro Expl"
id = 12502
pos = 0, 0 ;50
postype = p2
facing = 1
stateno = 12502
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0
ignorehitpause = 1
[State 1000: Helper]
type = Helper
triggerall = numenemy
triggerall = enemynear, movetype = H
triggerall = numhelper(247)
triggerall = !NumHelper(12503)
trigger1 = numhelper(1001)
trigger1 = helper(1001), var(1) = 1
trigger2 = numhelper(1007)
trigger2 = helper(1007), var(1) = 1
trigger3 = numtarget(1010) && var(1) = 1
trigger4 = numhelper(1016)
trigger4 = helper(1016), var(1) = 1
trigger5 = numtarget(1030) && helper(247), var(1) = 1
trigger6 = numtarget(1200) && helper(247), var(1) = 1
trigger7 = numtarget(1201) && helper(247), var(1) = 1
trigger8 = numtarget(1202) && helper(247), var(1) = 1
trigger9 = numtarget(1210) && helper(247), var(1) = 1
trigger10 = stateno = 3004
trigger11 = numtarget(3116) && helper(247), var(1) = 1
trigger12 = stateno = 3202 && animelem = 15
helpertype = Normal
name = "Multi Small Expl"
id = 12503
pos = 0, 0 ;50
postype = p2
facing = 1
stateno = 12503
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0
ignorehitpause = 1
[State 1000: Helper]
type = Helper
triggerall = numenemy
triggerall = enemynear, movetype = H
triggerall = numhelper(247)
triggerall = !NumHelper(12504)
trigger1 = numhelper(1001)
trigger1 = helper(1001), var(1) = 1
trigger2 = numhelper(1007)
trigger2 = helper(1007), var(1) = 1
trigger3 = numtarget(1010) && var(1) = 1
trigger4 = numhelper(1016)
trigger4 = helper(1016), var(1) = 1
trigger5 = numtarget(1030) && helper(247), var(1) = 1
trigger6 = numtarget(1200) && helper(247), var(1) = 1
trigger7 = numtarget(1201) && helper(247), var(1) = 1
trigger8 = numtarget(1202) && helper(247), var(1) = 1
trigger9 = numtarget(1210) && helper(247), var(1) = 1
trigger10 = stateno = 3004
trigger11 = numtarget(3116) && helper(247), var(1) = 1
trigger12 = stateno = 3202 && animelem = 15
helpertype = Normal
name = "Small Expl"
id = 12504
pos = 0, 0 ;50
postype = p2
facing = 1
stateno = 12504
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0
ignorehitpause = 1

;================================================================================
; ------- '02 UM MAX Mode System by Vans --------
;===============================================================================
[State -2, VarSet]
type = VarSet
trigger1 = var(53) < 0
var(53) =  0
ignorehitpause = 1
[State -2, VarAdd]
type = VarAdd
trigger1 = var(53)
var(53) =  -1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = var(51) < 0
var(51) =  0
ignorehitpause = 1
[State -2, VarAdd]
type = VarAdd
trigger1 = var(51)
var(51) =  -1
ignorehitpause = 1

[State -2, AttackMulSet]
type = AttackMulSet
trigger1 = var(51)>0
time = 1
value = 0.70
ignorehitpause = 1

[State -2, AttackMulSet]
type = AttackMulSet
trigger1 = var(51)=0 && var(46)=0
time = 1
value = 1
ignorehitpause = 1

[State -2, PalFX]
type = PalFX
trigger1 = numhelper(70001)
trigger1 =(GameTime%2) = 0
trigger1 = GetHitVar(hittime) < 2
time = 1
add = 126,126,0
color = 1
ignorehitpause = 1

[State -2, PalFX]
type = PalFX
trigger1 = numhelper(70002)
trigger1 =(GameTime%2) = 0
trigger1 = GetHitVar(hittime) < 2
time = 1
add = 126,0,0
color = 1
ignorehitpause = 1


;================================================================================
; ------- KOF K.O. System by Vans --------
;===============================================================================
[State -2, Helper]
type = Helper
triggerall = !numhelper(50000) && !numhelper(50001)
triggerall = WinKO && var(24)
triggerall = movehit
trigger1 = stateno = [200,999]
trigger2 = stateno = [1300,1350]
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
[State -2, Helper]
type = Helper
triggerall = !numhelper(50000) && !numhelper(50001)
triggerall = WinKO && var(24)
triggerall = movehit
trigger1 = stateno = [1000,1299]
trigger2 = stateno = [3000,3099]
trigger3 = stateno = 3116
trigger4 = stateno = 3202
helpertype = normal
name = "K.O."
ID = 50001
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

;================================================================================
; ------- AI Shit --------
;===============================================================================
[State -2, StopAI]
type = VarSet
triggerall = var(30) > 0 && !IsHelper
trigger1 = RoundState != 2
trigger2 = !Alive
var(30) = -2
IgnoreHitPause = 1


;================================================================================
; ------- Jump stuff --------
;===============================================================================
[State 50, reset]
type = VarSet
trigger1 = stateno != [40,50]
var(2) = 0

;================================================================================
; ------- Enemy Taunt --------
;===============================================================================
[State -2, Taunt]
type = PowerAdd
triggerall = numenemy
trigger1 = (p2stateno = 195) && (enemy, statetime < 20)
trigger1 = var(1) != 1
value = 11

;================================================================================
; ------- No Air Guard --------
;===============================================================================
[State -2, AirGuard]
type = AssertSpecial
trigger1 = 1
flag = NoAirGuard
IgnoreHitPause = 1

;================================================================================
; ------- Throw Limitation by OrochiKOF97 --------
;===============================================================================
[State -2, Guard Var]
type = VarSet
trigger1 = stateno = [200,505] ; Non-Air basic moves states.
trigger1 = moveguarded > 0 ; This is the key : checks if opponent has guarded a basic attack
trigger2 = stateno = [600,710] ; Air Basic Moves
trigger2 = movecontact > 0 ; This includes both moveguarded & movehit as well
v = 19
value = 30
persistent = 0
ignorehitpause = 1

[State -2, Guard Var 2]
type = VarAdd
triggerall =!var(6)
trigger1 = var(19) > 0
var(19) = -1
ignorehitpause = 1

[State -2, Guard Var 3]
type = VarSet
triggerall = !var(6)
trigger1 = var(19) < 0
var(19) = 0
persistent = 0
ignorehitpause = 1


;================================================================================
; ------- KOF Lifebar Display by OrochiKOF97 --------
;===============================================================================
[State -2, Special]
type = AssertSpecial
trigger1 = roundstate = [0,1]
;trigger2 = roundstate = 4
;trigger3 = Ctrl = 0 && Anim = 0 && MoveType != H
flag = NoBarDisplay
ignorehitpause = 1

;================================================================================
; ---- Afterimage Remove Code by Warusaki, slightly modified by Mr. Fong ----
;===============================================================================
[State -2, Afterimage Remover]
type = AfterImageTime
triggerall = 1
trigger1 = MoveType = H
trigger2 = StateNo = [0,40]
trigger3 = StateNo = [52,199]
trigger4 = (StateNo = [200,749]) && PrevstateNo != 50 && Prevstateno != 40
trigger5 = Stateno = [5000,5999]
time = 0

;================================================================================
; ------- NotHitBy fix by Caddie --------
;===============================================================================
[State -2, hitby]
type = hitby
trigger1 = life > 0
trigger1 = stateno = 5100 || stateno = 5110 || stateno = 5120
trigger1 = anim != 5120
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
time = 1

;================================================================================
; ------- Cybaster Fix --------
;===============================================================================
[State -3, Cybaster fix]
type = StopSnd
trigger1 = stateno != 101
trigger1 = stateno != 3100
channel = 27


;================================================================================
; ------- 2002 Only / WLS NEO --------
;===============================================================================
;      - I do _not_ make myself responsible for the changes made here -
;Compatibility with XI has been completely dropped do _not_ ask me to add it
;back.

[State -2, Mode]
type = null
trigger1 = (var(31) := 1)||e
trigger1 = (var(32) := 1)||e
trigger1 = (var(33) := 1)||e
trigger1 = (var(25) := 0)

;================================================================================
; ------- Tick Fix --------
;===============================================================================
[State -2, CtrlSet]
type = CtrlSet
;Gethits
trigger1 = (stateno=52 || stateno=102 || stateno=107 || stateno=5120) && !animtime
trigger2 = (stateno=5001 || stateno=5011 || stateno=151 || stateno=153) && hitover
value = 1
[State -2, CtrlSet]
type = CtrlSet
triggerall = !animtime
;Basic moves
trigger1 = (stateno = [200,599])
;System moves
trigger2 = (stateno = [750,760])
;Command moves
trigger3 =  stateno = 800
trigger4 =  stateno = 801
;Special moves
trigger5 =  anim = 1000 && !animtime
value = 1

;================================================================================
; ------- KOF Cornerpush System by Vans --------
;===============================================================================
[State -2, Superpause Check]
type = VarAdd
trigger1 = Var(6)
var(6) = -1

[State -2, Reset Time counter]
type = VarSet
trigger1 = movecontact = 1
var(12) = 0

[State -2, Accel]
type = VarSet
triggerall = roundstate = 2
triggerall = Var(6) <= 0
triggerall = numtarget >= 1
trigger1 = target, hitshakeover
fvar(6) = (target, gethitvar(xvel)*exp((-0.1886)*((var(12)))))

[State -2, Push]
type = PosAdd
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = numtarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = ProjContact = 0, < 50
triggerall = stateno != [900,949]
triggerall = stateno != [956,979]
triggerall = numenemy
triggerall = enemynear,statetype != A
trigger1 = Statetype != A
x = ifelse(facing = -1,fvar(6),-fvar(6))

[State -2, Increase]
type = VarSet
triggerall = numtarget >= 1
triggerall = target, hitshakeover
trigger1 = Var(6) <= 0
trigger1 = var(12)
var(12) = var(12)+1

[State -2, Time counter]
type = VarSet
trigger1 = !var(12)
trigger1 = fvar(6)
var(12) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(6)
value = 1

[State -2, Drop]
type = VarSet
triggerall = fvar(6)
trigger1 = !numtarget
trigger2 = projcontact = 1
trigger3 = movecontact = 1
fvar(6) = 0
ignorehitpause = 1

[State -2, Drop]
type = VarSet
triggerall = fvar(8)
trigger1 = !numtarget
trigger2 = projcontact = 1
trigger3 = numtarget >= 1 && target, gethitvar(xvel) = 0
var(17) = 0

[State -2, TargetDrop]
type = TargetDrop
trigger1 = numhelper(1050)
trigger1 = helper(1050), numtarget
trigger2 = numhelper(1021)
trigger2 = helper(1021), numtarget
;================================================================================
; ------- DM Flash for Projectiles --------
;===============================================================================

;================================================================================
; ------- Skillbar System by Vans --------
;===============================================================================
[State -2, Add Meter]
type = VarAdd
triggerall = !var(33)
triggerall = fvar(5) < 1000
trigger1 = roundstate != [0,1]
trigger1 = roundstate != [3,4]
trigger1 = !(Ctrl = 0 && Anim = 0 && MoveType != H)
fvar(5) = 1.3736263736263736263736263736264
ignorehitpause = 1

[State -2, Add Meter]
type = VarAdd
triggerall = !var(33)
triggerall = fvar(5) = [1000,2000)
trigger1 = roundstate != [0,1]
trigger1 = roundstate != [3,4]
trigger1 = !(Ctrl = 0 && Anim = 0 && MoveType != H)
fvar(5) = 0.68681318681318681318681318681319
ignorehitpause = 1

;Skill Bar
[State -2, Helper]
type = Helper
triggerall = !var(33)
triggerall = !NumHelper(70000)
trigger1 = roundstate >= 2
id = 70000
name = "skill bar"
pos = 0,300
postype = P1
stateno = 70000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;Skill Bar
[State -2, Helper]
type = Helper
triggerall = !var(33)
triggerall = !NumHelper(70001)
triggerall = roundstate >= 2
trigger1 = Var(58) = [1000,1001]
trigger2 = Var(58) = 1999
id = 70001
name = "skill bar playsnd"
pos = 0,300
postype = P1
stateno = 70001
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;================================================================================
; ------- KOF Juggle System By Kira and L --------
;===============================================================================
; Basic, Command, and Special Juggling
[State -2, Limiter]
type = VarSet
triggerall = numhelper(247)
trigger1 = P2MoveType != H && P2StateType != A && P2StateNo != 5040
trigger2 = P2MoveType = H && var(56) && !var(55) && numtarget(980) && helper(247), var(1) = 1
var(55) = 0
ignorehitpause = 1
[State -2, Limiter]
type = VarSet
triggerall = !Var(55)
trigger1 = P2StateNo = 5040
trigger2 = P2MoveType = H && !var(56) && !var(55) && numtarget(980) && helper(247), var(1) = 1
var(55) = 1
ignorehitpause = 1
[State -2, SCal Reset]
type = VarSet
triggerall = var(54)
trigger1 = stateno != [3000,3999]
var(54) = 0
ignorehitpause = 1

[State -2, AirGuard]
type = AssertSpecial
trigger1 = 1
flag = NoJuggleCheck ;Believe in the juggling system.
IgnoreHitPause = 1

;================================================================================
; ------- COUNTER HIT (Based on Sander's Method) --------
;===============================================================================
[State -2, VarSet];Checks if opponent is in attack state
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = a
var(56) = 1
ignorehitpause = 1

[State -2, VarSet];This resets the condition if counter not succesful and succesful
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = i || var(57) >= 1  ;Enemy is Idle | Counter was Succesful
trigger2 = var(57) > 10 && enemy, movetype = h  ;10 ticks passed & enemy is on gethit state
var(56) = 0
ignorehitpause = 1

[State -2, VarSet];Counter Hit Succesful
type = VarSet
trigger1 = var(56) = 1 && movehit ;Counter Check Ok, Move Hit Succesfully.
trigger1 = stateno != [190,199] ;Does not activate during intros.
trigger1 = stateno != [900,979] ;Does not activate during throws.
trigger1 = stateno != [3000,3099] ;Don't activate during throws.
trigger1 = stateno != [3700,3799] ;Don't activate during throws.
trigger2 = var(56) = 1 && projhit = 1  ;Counter Check Ok, Projectile Hit Succesfully.
var(57) = 1
ignorehitpause = 1

[State -2, VarAdd];Counter Hit Timer
type = VarAdd
trigger1 = var(57) >= 1 ;Counter was succesful
var(57) = 1
ignorehitpause = 1

[State -2, VarSet];Counter Hit Reset
type = VarSet
trigger1 = var(57) >= 22 && movehit ;Reset if 22 ticks passed and move hit
trigger2 = p2movetype != h ;Reset if P2 is no longer in gethit state
trigger3 = movetype = h ;Reset if P1 is getting hit
trigger4 = var(57) >= 22 && projhit = 1 ;Reset if 22 ticks passed and projectile hit
var(57) = 0
ignorehitpause = 1

[State -2, AssertSpecial];This will award free juggles for Counter Hit.
type = AssertSpecial
trigger1 = var(57) > 0
flag = nojugglecheck

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = numenemy
triggerall = var(21)
triggerall = stateno != [190,199] ;Does not activate during intros.
triggerall = stateno != [900,979] ;Does not activate during throws.
triggerall = stateno != [3000,4000] ;Don't activate during Hyper Moves
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = var(56) = 1 && movehit  ;Move hit, Ok
trigger2 = var(56) = 1 && projhit = 1 ;Projectile hit, Ok
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 13000
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 13001
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 24000
pos = 2,106+4 ;106 is the correct offset, +2 to be aligned with OrochiKOF's
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 57
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 24001
pos = -69,106+4
postype = right  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 57
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

;================================================================================
; ------- DIZZY CODE --------
;===============================================================================
[State -2, reset Dizzy]
type = VarSet
trigger1 = RoundState = 0 || RoundState = 3 || (movetype = H &&  var(14) = 1 && stateno != 5250)
ignorehitpause = 1
var(13) = 0

[State -2, reset Dizzy]
type = VarSet
trigger1 = var(13) <= 0 && var(14) = 1
ignorehitpause = 1
var(14) = 0

[State -2, DIZZY CODE]
type = VarAdd
triggerall = numenemy
trigger1 = (var(13) = [1,999]) && movetype = H && enemy, hitdefattr = SCA, HA, HP
var(13) = -50
ignorehitpause = 1 

[State -2, DIZZY CODE]
type = VarAdd
trigger1 = (var(13) = [1,999]) && movetype = H && gethitvar(hitcount) >= 5 
var(13) = -20
ignorehitpause = 1 

[State -2, DIZZY CODE]
type = VarAdd
trigger1 = var(13) = [1,999]
var(13) = -1
ignorehitpause = 1 

[State -2, DIZZY CODE]
type = Varset
trigger1 = var(13) > 1000
var(13) = 1000
ignorehitpause = 1 
;----------------

;================================================================================
; ------- Cheap K.O. system By Warusaki3 --------
;===============================================================================
[State -2, 3]
type = ChangeState
trigger1 = !Alive
trigger1 = PrevStateNo = 130 || PrevStateNo = 131 || PrevStateNo = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
fvar(1) = 0

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
fvar(1) = 1

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
fvar(1) = 2

;----------------------------------------------------------------------------------
; KO Voice
[State -2,AI]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(2) = 0

[State -2,AI]
type = VarSet
trigger1 = Anim = 5950 || StateNo = 5950
ignorehitpause = 1
fvar(2) = 1

[State -2,AI]
type = VarSet
trigger1 = movetype != H
trigger1 = roundstate = 2
ignorehitpause = 1
fvar(35) = 0

[State -2,AI]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = roundstate = 2
trigger1 = Time = 0
ignorehitpause = 1
fvar(35) = GetHitVar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
ignorehitpause = 1
value = S111, 0

[State -2, KO]
type = PlaySnd
triggerall = roundstate = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(1) = 2
ignorehitpause = 1
value = S5950, 0

[State -2,KO]
type = Varadd
trigger1 = !Alive
ignorehitpause = 1
fvar(36) = 1

[State -2,KO]
type = Varset
trigger1 = Alive
ignorehitpause = 1
fvar(36) = 0

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13))
trigger2 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13))
trigger4 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13))
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13))
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgeese"&&enemynear,var(13))
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13))
fvar(0) = 1

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13)=0)
trigger2 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=0)
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13)=0)
trigger4 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13)=0)
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13)=0)
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgeese"&&enemynear,var(13)=0)
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13)=0)
fvar(0) = 0

;----------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;----------------------------------------------------------------------

[Statedef -3]

;MAX Cancel detector
[State 0, VarSet]
type = VarSet
trigger1 = stateno = 200 || stateno = 300 || stateno = 310 || stateno = 600 || stateno = 700 || stateno = 800
trigger2 = (stateno = [200,999]) && !(hitdefattr = SCA, NA)
trigger3 = (prevstateno = [1000,2999])
var(50) = 1
persistent = 0

[State 0, VarSet]
type = VarSet
triggerall = stateno != 200 && stateno != 300 && stateno != 310 && stateno != 600 && stateno != 700 && stateno != 800
trigger1 = stateno = [200,999]
trigger1 = (hitdefattr = SCA, NA)
var(50) = 0
persistent = 0

;-----------------------------------------------------------------------
;Custom Damage Dampening System by K.O.D
;-----------------------------------------------------------------------
;Decreaser
[State 0, VarAdd]
type = VarAdd
trigger1 = var(46) > 0
var(46) = -1
ignorehitpause = 1

[State 0, AttackMulSet]
type = AttackMulSet
triggerall = numenemy
trigger1 = var(46)>0
time = 1
value = ifelse(enemynear,gethitvar(hitcount)>=4,0.40,0.70)
ignorehitpause = 1

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(46)=0
time = 1
value = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = numenemy
trigger1 = enemynear,movetype!=H
trigger2 = movetype = H
var(46) = 0

[State 0, VarSet]
type = VarSet
triggerall = numenemy
triggerall = enemynear,movetype=H
triggerall = var(46)=0
trigger1 = prevstateno = [200,899]
;Specials with free juggles
trigger2 = stateno = [1000,1015]
trigger3 = stateno = 1310
var(46) = 200


;----------------------------------------------------------

[State -3, SetAI]
type = VarSet
triggerall = Alive && !IsHelper
triggerall = IsHomeTeam
trigger1 = TeamSide = 2
trigger2 = MatchNo > 1
var(30) = 1

[State -3, AI Helper - Compatibly Partnered Version]
type = Helper
trigger1 = !var(30) && !IsHelper
trigger1 = !NumHelper(9742)
trigger1 = Alive && RoundState = 2
trigger1 = NumPartner
trigger1 = Partner,SelfAnimExist(9741)
HelperType = normal
name = "AI Helper (Simul Version)"
ID = 9742
pos = 9999999,99999
StateNo = 9742
KeyCtrl = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

[State -3, AI Helper]
type = Helper
triggerall = !var(30) && !IsHelper
triggerall = !NumHelper(9741)
triggerall = Alive && RoundState = 2
trigger1 = !NumPartner
trigger2 = !(Partner,SelfAnimExist(9741))
HelperType = normal
name = "AI Helper"
ID = 9741
pos = 9999999,99999
StateNo = 9741
KeyCtrl = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

[State -3, TurnBackOnAI]
type = VarSet
trigger1 = var(30) = -2 && !IsHelper
trigger1 = Alive && RoundState = 2
var(30) = 1

[State -3, XOR]
type = VarSet
triggerall = var(30)!=1 && !IsHelper
triggerall = !var(28)
triggerall = var(29) = GameTime-1
trigger1 = command = "a" ^^ command = "a2"
trigger2 = command = "b" ^^ command = "b2"
trigger3 = command = "c" ^^ command = "c2"
trigger4 = command = "x" ^^ command = "x2"
trigger5 = command = "y" ^^ command = "y2"
trigger6 = command = "z" ^^ command = "z2"
trigger7 = command = "start" ^^ command = "start2"
trigger8 = command = "hold_a" ^^ command = "hold_a2"
trigger9 = command = "hold_b" ^^ command = "hold_b2"
trigger10 = command = "hold_c" ^^ command = "hold_c2"
trigger11 = command = "hold_x" ^^ command = "hold_x2"
trigger12 = command = "hold_y" ^^ command = "hold_y2"
trigger13 = command = "hold_z" ^^ command = "hold_z2"
trigger14 = command = "hold_start" ^^ command = "hold_start2"
trigger15 = command = "holdfwd" ^^ command = "holdfwd2"
trigger16 = command = "holdback" ^^ command = "holdback2"
trigger17 = command = "holdup" ^^ command = "holdup2"
trigger18 = command = "holddown" ^^ command = "holddown2"
trigger19 = command = "recovery" ^^ command = "recovery2"
var(30) = 1

[State -3, fiXOR]
type = VarAdd
trigger1 = var(28) > 0 && !IsHelper
var(28) = -1

[State -3, fuXOR]
type = VarSet
trigger1 = var(29) < GameTime-1 && !IsHelper
var(28) = 31
IgnoreHitPause = 1

[State -3, GameTimeVar]
type = VarSet
trigger1 = !IsHelper
var(29) = GameTime
IgnoreHitPause = 1

[State -3, Corner];ZOMG STOLEN FROM IRON
type = Velset
trigger1 = FrontEdgeDist < 10 && vel x > 0.1
x = 0.1

[State -3, hop]
type = PlaySnd
triggerall = time = 1
trigger1 = StateNo = 105
value = 2+(var(32)*10),12

[State -3, land]
type = PlaySnd
triggerall = time = 1
trigger1 = StateNo = 52
value =  2+(var(32)*10),2

[State -3, land]
type = PlaySnd
triggerall = time = 1
trigger1 = StateNo = 150
trigger2 = StateNo = 152
trigger3 = StateNo = 154
value =  2+(var(32)*10),2

[State -3,STOP]
type = StopSnd
trigger1 = stateno != 195
trigger1 = stateno != 0
channel = 19

[State -3, Hurt Sound]; Stolen from Warusaki.
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = Alive
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5100
value = S5000,ifElse(StateNo = 5100||GetHitVar(animtype) = 2,2+(random%1),ifElse(GetHitVar(animtype) = 1,1+(random%1),0+(random%2)))
channel = 7

;----------------------------------------------------------------------------------------------
; State -3 / Guard Crush System / var(11) : Guard Crush Variable
;----------------------------------------------------------------------------------------------


[State -3, Light Hit Guard]
type = VarAdd
triggerall = var(11) > 0
trigger1 = stateno = 5001
trigger1 = anim = 5000
trigger2 = stateno = 5001
trigger2 = anim = 5010
trigger3 = stateno = 5011
trigger3 = anim = 5020 
persistent = 0
var(11) = -1
ignorehitpause = 1

[State -3, Medium Hit Guard]
type = VarAdd
triggerall = var(11) > 0
trigger1 = stateno = 5001
trigger1 = anim = 5001
trigger2 = stateno = 5001
trigger2 = anim = 5011
trigger3 = stateno = 5011
trigger3 = anim = 5021 
persistent = 0
var(11) = -3
ignorehitpause = 1

[State -3, Strong Hit Guard]
type = VarAdd
triggerall = var(11) > 0
trigger1 = stateno = 5001
trigger1 = anim = 5002
trigger2 = stateno = 5001
trigger2 = anim = 5012
trigger3 = stateno = 5011
trigger3 = anim = 5022 
persistent = 0
var(11) = -6
ignorehitpause = 1

[State -3, Fall Hit Guard]
type = VarAdd
trigger1 = var(11) > 0
trigger1 = PrevStateNo = 5050
persistent = 0
var(11) = -10
ignorehitpause = 1

[State -3, Special Add]
type = VarAdd ; Add when hitshaketime had at lease 15 ticks - Heavy Guard
triggerall = GetHitVar(hitshaketime) = 15
trigger1 = stateno = 150
trigger2 = stateno = 152
var(11) = 6
ignorehitpause = 1

[State -3, Special Add 2]
type = Varadd ; Add when hitshaketime had at lease 12 ticks - Medium Guard
triggerall = GetHitVar(hitshaketime) = 12
trigger1 = stateno = 150
trigger2 = stateno = 152
var(11) = 4
ignorehitpause = 1

[State -3, Special Add 3]
type = Varadd ; Add when hitshaketime had at lease 8 ticks - Light Guard
triggerall = GetHitVar(hitshaketime) = 8
trigger1 = stateno = 150
trigger2 = stateno = 152
var(11) = 2
ignorehitpause = 1

[State -3, Guard Crush]
type = ChangeState ; Change To Guard Crush When Var(11) Limits Are Reached.
trigger1 = var(11) >= 55
value = 9000
ctrl = 0
ignorehitpause = 1


;===========================================================
;Power Bar detection
;===========================================================

;no MAX mode, below 1000 power
[State 0, VarSet]
type = VarSet
trigger1 = !var(51) && power >= 0 && power < 1000
v = 35
value = 0
ignorehitpause = 1

;MAX mode, below 1000 power
[State 0, VarSet]
type = VarSet
trigger1 = var(51) && power >= 0 && power < 1000
v = 35
value = 1
ignorehitpause = 1

;no MAX mode, below 2000 power
[State 0, VarSet]
type = VarSet
trigger1 = !var(51) && power >= 1000 && power < 2000
v = 35
value = 2
ignorehitpause = 1

;MAX mode, below 2000 power
[State 0, VarSet]
type = VarSet
trigger1 = var(51) && power >= 1000 && power < 2000
v = 35
value = 3
ignorehitpause = 1

;no MAX mode, below 3000 power
[State 0, VarSet]
type = VarSet
trigger1 = !var(51) && power >= 2000 && power < 3000
v = 35
value = 4
ignorehitpause = 1

;MAX mode, below 3000 power
[State 0, VarSet]
type = VarSet
trigger1 = var(51) && power >= 2000 && power < 3000
v = 35
value = 5
ignorehitpause = 1

;no MAX mode, 3000 power
[State 0, VarSet]
type = VarSet
trigger1 = !var(51) && power >= 3000
v = 35
value = 6
ignorehitpause = 1


;--------------------------------------------------------------------------------------
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for first round
type = ChangeState
trigger1 = roundsexisted = 0
trigger2 = roundno = 1
value = 190

[State 192]
type=changestate
triggerall = roundno > 1 
trigger1 = p2name = "Kula Diamond" && Enemy, AuthorName = "KoopaKoot" && enemy,roundsexisted = 0
value = 185
